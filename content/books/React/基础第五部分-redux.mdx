---
title: "React-Redux çŠ¶æ€ç®¡ç†è¯¦è§£ï¼šæ ¸å¿ƒæ¦‚å¿µä¸å®æˆ˜åº”ç”¨"
date: "2025-06-17"
summary: "æ·±å…¥è®²è§£ React-Redux çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ Redux ä¸‰å¤§æ ¸å¿ƒã€react-redux ä½¿ç”¨ã€combineReducers åŠ redux-saga å¼‚æ­¥å¤„ç†ï¼Œç»“åˆå®æˆ˜æ¡ˆä¾‹æ¼”ç¤ºå®Œæ•´å¼€å‘æµç¨‹ã€‚"
status: "completed"
tech: ["React", "Redux", "State Management"]
github: "https://github.com/BM-laoli"
arxiv: ""
keyId: "React"
---

> react-reduxçŠ¶æ€ç®¡ç†ï¼Œç±»ä¼¼äºvuexï¼Œè¿™ä¸ªæ˜¯åœ¨reduxä¸­éå¸¸é‡è¦çš„ä¸€ç‚¹ï¼
>
> reduxæ˜¯jsçš„çŠ¶æ€å®¹å™¨ï¼Œå’Œvuexå·®ä¸å¤š
>

reduxå¯ä»¥æ„å»ºï¼Œä¸€è‡´æ€§çš„åº”ç”¨ï¼ŒåŸç”Ÿçš„å¯ä»¥ï¼Œè€Œä¸”ä¹Ÿå¯ä»¥å…¼å®¹æ›´å¤šçš„åº“jqä¹Ÿå¯ä»¥ åŸç”Ÿçš„jsä¹Ÿå¯ä»¥ä½¿ç”¨

reduxå¾ˆå°åªæœ‰2kb



è®¾è®¡çš„åˆè¡·ï¼Œæ•°æ®è¶Šæ¥è¶Šå¤æ‚ï¼ŒåµŒå¥—çš„æ•°æ®å¤ªå¤šï¼Œç®¡ç†ä¸æ–­å˜åŒ–çš„stateéå¸¸çš„éº»çƒ¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªå…¨å±€çš„å®¹å™¨

æ¥ç®¡ç†è¿™äº›çŠ¶æ€ï¼Œé¿å…æ··ä¹±



### ä¸‰å¤§æ ¸å¿ƒæ¦‚è¿°
1. å•ä¸€çŠ¶æ€æ ‘ï¼Œ

> è¿™ä¸€ç‚¹éƒ½å’Œvuexçš„æ¦‚å¿µæ˜¯ä¸€æ ·çš„ï¼Œæ•´ä¸ªçš„é¡µé¢çš„stateéƒ½ä¼šå­˜åœ¨ä¸€é¢—object treeä¸­ï¼Œè€Œobject treeåˆå­˜å‚¨åœ¨
>
> soterä¸­
>
> ![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597408957029-ec2439ed-2679-425e-acd7-0202158a0b0c.png)
>

2. stateæ˜¯åªè¯»çš„ï¼Œ

> å’Œvuexä¸­çš„muationæ˜¯ä¸€æ¯›ä¸€æ ·çš„ï¼Œåªä¸è¿‡å˜æˆäº†å¦ä¸€ä¸ªåå­— actionï¼Œ
>
> æ”¹å˜stateçš„å”¯ä¸€æ–¹æ³•æ˜¯è§¦å‘ä¸€ä¸ªactionï¼Œactionå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œæ‰€æœ‰çš„ä¿®æ”¹éƒ½ä¼šé›†ä¸­å¤„ç†ï¼Œå¹¶ä¸”ä¸€ä¸ªä¸€ä¸ªçš„
>
> å»æ‰§è¡Œ
>

å¦‚ä½•å‘é€ä¸€ä¸ªacionï¼Ÿéå¸¸çš„ç®€å• å’Œvuexä¸­ä¹Ÿå·®ä¸å¤š ![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597409101919-2398d0eb-4112-4bcc-991a-ba4542de3dec.png)

3. ä½¿ç”¨çº¯å‡½æ•°ï¼Œæ¥æ‰§è¡Œä¿®æ”¹

ä¸ºäº†æè¿°actionå¦‚ä½•æ”¹å˜state treeï¼Œä½ éœ€è¦å»ç¼–å†™reducersï¼Œ

reducersï¼Œæ˜¯ä¸€ä¸ªçº¯å‡½æ•°è€Œå·²å•¦ï¼Œå®ƒæ¥å—å…ˆå‰çš„stateå’Œaction è¿”å›æ–°çš„stateï¼Œ

å®ƒå¯ä»¥å¤ç”¨ï¼Œæ§åˆ¶é¡ºåºï¼Œä¼ å…¥è¾…åŠ©å‚æ•°



### reduxçš„æ ¸å¿ƒç»„æˆ


#### State-çŠ¶æ€
> è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬ä¼ å…¥çš„æ•°æ®ï¼Œæˆ‘ä»¬åœ¨åšreactçš„æ—¶å€™ï¼Œå¤§æ¦‚å¯ä»¥åˆ†ä¸‰ç±»state
>

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597410107476-ccc0b891-2c62-41e9-8ec4-5876f3d44943.png)

#### Action-äº‹ä»¶
> è¿™ä¸ªå®é™…ä¸Šactionå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªè½½ä½“
>
> ![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597410158202-69a3a993-1d52-452b-9f25-89fc20d562fd.png)
>

ç‰¹ç‚¹å¦‚ä¸‹ï¼š

æ³¨æ„å•Šï¼Œactionæ˜¯æè¿°ï¼Œè¡¨ç¤ºå°†è¦æœ‰ä»€ä¹ˆæ”¹å˜

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597410207644-1ed7581d-7cf5-4bdb-b619-417d43ced051.png)

#### reducer
è¿™ä¸ªä¸œè¥¿ä¹Ÿç®—æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå“åº”ä¼ é€’è¿‡æ¥çš„actionsï¼Œç„¶åå¤„ç†å®ƒï¼Œæœ€ç»ˆæŠŠå¤„ç†å¥½çš„stateå‘é€ä¼šstore

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597410260596-95f538c5-8c1a-4796-abec-a852ac506081.png)

#### <font style="background-color:#FADB14;">Storeæ ¸å¿ƒ</font>
![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597410951796-b8853957-2551-444c-b386-75dcf83be191.png)



#### å°ç»“
![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597411045977-522b9de8-736b-4ce2-8f7f-e3bd2871e81f.png)



### ç¤ºä¾‹å°demo
#### é¦–å…ˆæ˜¯èµ·é¡¹ç›®
> ä¸€ä¸ªéå¸¸ç®€å•çš„åŸºäºreatc-creat-cliçš„å°é¡¹ç›®éœ€è¦å¯åŠ¨å‡ºæ¥ï¼Œè®©ååˆå§‹åŒ–åˆ é™¤ä¸€äº›æ²¡æœ‰ç”¨çš„ä¸œè¥¿ï¼Œé…ç½®ä¸€ä¸‹æˆ‘ä»¬çš„ç›®å½•ï¼Œä¸‹è½½reduxå°±å¥½äº†
>

1. é‡ç‚¹è¯´æ˜:æˆ‘ä»¬éœ€è¦åˆ é™¤é‚£äº›ä¸éœ€è¦çš„æ–‡ä»¶å‘¢?

æˆ‘ä»¬åªéœ€è¦ä¿ç•™å¦‚ä¸‹çš„æ–‡ä»¶å°±å¥½äº†

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597411690316-017c0c5d-3ce7-4f86-804b-1dc9cf70e72e.png)å…¶å®ƒçš„åˆå§‹åŒ–çš„æ—¶å€™ä¸€äº›æ²¡æœ‰ç”¨çš„éƒ½å¯ä»¥åˆ é™¤æ‰



æœ€åå°±æ˜¯ä½ éœ€è¦å®‰è£…reduxå°±å¥½äº†

#### å¤§æ¦‚çš„æ­¥éª¤å¦‚ä¸‹
![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597448577341-3a06ae90-1a5d-4f85-9e11-800b8e567816.png)

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597449955145-c0673100-ff08-4534-8b63-cbfe601a2622.png)

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597450879776-855d80c7-1698-4891-8e80-fcc258613353.png)



#### ä»£ç å±‚çº§å¦‚ä¸‹
![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597450907663-2c68397f-58ca-4196-8720-9db09e790f96.png)

+ æ ¸å¿ƒä»£ç å¦‚ä¸‹

/action

```javascript

/**
 * action æ„å»ºå‡½æ•°
 */
const sendAction = () => {
  return {
    type: 'SEND_TYPE',
    valu: 'æˆ‘æ˜¯ä¸€ä¸ªaction'
  }
}


export { sendAction }
```

/reducer

```javascript
/**
 * æœ¬æ–‡ä»¶ç”¨æ¥åˆ›å»ºreducerå‡½æ•°æ¥å¤„ç†ä¼ é€’è¿‡æ¥çš„acstion
 */

const initState = {
  value: 'é»˜è®¤çš„å€¼'
}

const reducer = (state = initState, action) => {
  switch (action.type) {
    case value:
      return Object.assign({}, state, action)
    default:
      return state
  }
}

export { reducer }
```

/store

```javascript
import { createStore } from 'redux'
import { reducer } from '../reducer/index'

/**
 * æ„å»º ä¼ å…¥å‚æ•°ï¼Œæ„å»ºstore
 */

const store = createStore(reducer)

export { store }
```



/page

```javascript
import React from 'react'

import { sendAction } from '../action';
import { store } from '../store';


  class Home extends React.Component {

    constructor(props) {
      super(props);
      this.state = {}
    }

    handClick = () => {
      const action = sendAction()
      // å‘é€action
      store.dispatch(action)
    }

    // ç›‘å¬
    componentDidMount () {
      store.subsctibe(() => {
        // æ³¨æ„è¦è§¦å‘redneréœ€è¦é‡æ–°è°ƒç”¨setdata
        this.setState({})
      })
    }
    render () {
      return (
        <>
          <button onClick={this.handClick}>ç‚¹å‡»æˆ‘ï¼Œå‘é€ä¸€ä¸ªaction</button>
          <div>{store.getState().value}</div>
        </>
      )
    }
  }

export default Home;
```



### react-redux
> åœ¨ä¸Šé¢çš„ä»£ç æˆ‘ä»¬çŸ¥é“äº†è¿™æ ·çš„ä¸€ä¸ªäº‹æƒ…ï¼šå¦‚æœæˆ‘ä»¬éœ€è¦é¢‘ç¹çš„æè¿™ä¸ªreduxé‚£ä¹ˆï¼Œæ˜¯éå¸¸éº»çƒ¦çš„ï¼Œæˆ‘ä»¬æœ‰æ²¡æœ‰ä¸€ä¸ªä¸œè¥¿ï¼Œå¯ä»¥å…¨å±€çš„ç®¡ç†è¿™äº›storteå‘¢ï¼Ÿè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬çš„react-reduxçš„ä½œç”¨
>

#### æ¦‚è¿°
![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597451343278-ceff3326-f1ff-4570-be33-9fe91f016600.png)

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597451355731-3be7adb2-f699-4fe9-bb56-0e40d6820057.png)

æœ‰ä¸¤ä¸ªéå¸¸é‡è¦çš„ä¸œè¥¿ï¼Œéœ€è¦æˆ‘ä»¬å­¦ä¹ ï¼Œ

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597451413738-bd4b86eb-1f76-436b-85e6-02dbda34b175.png)



1. provideræ˜¯ä»€ä¹ˆï¼Ÿå®ƒçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597451502446-1ec4cd9d-7fd7-4c59-9603-ec44a27674c2.png)

2. connect

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597451556369-3892f5f4-cdac-4b6e-8bfc-d2126b8d571e.png)

3. æ€»ç»“

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597451590330-07010d8c-49e7-4870-b768-fe192a0dd56d.png)

#### åŸºç¡€çš„ä½¿ç”¨
> æˆ‘ä»¬éœ€è¦å®ç°å¦‚ä¸‹çš„è¿™ä¸ªå°çš„åŠŸèƒ½
>

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597451637508-75e1601a-61d2-4633-afca-95616e8ab0cf.png)



#### é¦–å…ˆæ˜¯å‰æœŸçš„å‡†å¤‡å·¥ä½œ
1. é¦–å…ˆ ä¸‹åŒ…

```shell
npm install react-redux
npm install redux
# æ³¨æ„å•Šï¼Œæˆ‘ä»¬çš„react-reduxæ˜¯ä¾èµ–reduxçš„ï¼Œæ‰€ä»¥ä½ éœ€è¦æŠŠreduxä¹Ÿä¸‹è½½ä¸‹æ¥
```

2. å…¶æ¬¡æ˜¯æ„å»ºæ–‡ä»¶ç›®å½•

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597468796316-67542ba1-438d-4c46-9091-f0be20331b50.png)

3. ç„¶åæ˜¯å†™ä»£ç ï¼ˆè¿™é‡Œçš„ä»£ç åŠä»…ä»…æ˜¯æˆ‘ä»¬çš„reducerè¿˜æœ‰é¡µé¢çš„ç»“æ„è¿˜æœ‰æˆ‘ä»¬çš„stroeï¼‰

> è¿™é‡Œæˆ‘ä»¬ä¹¦å†™äº† pageä¸¤ä¸ªé¡µé¢ï¼Œè¿˜æœ‰ä¸€ä¸ªäººreducer è¿˜æœ‰srtoreä¸œè¥¿
>



/ComÂ A å’ŒBçš„ç»„ä»¶

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597468998818-1ca3fcfc-1735-4cd1-a49e-ac354b532ed3.png)

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597469004528-026b27bf-f922-4032-baac-e21593bec7a3.png)

æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ ¸å¿ƒçš„å‡ ä¸ªä»£ç 



/reducer

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597468866876-9a887b77-f488-4e8b-94b7-7b4ebae1572c.png)

/store

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597468880449-6605d237-523d-44a7-bc4c-1a7c5c8b1811.png)



#### ä½¿ç”¨provideræ¥åŒ…è£¹æ•°æ®
> è¿™ä¸ªæ˜¯ä¸€ä¸ªç»„ä»¶ï¼ï¼ï¼ï¼Œå®ƒçš„ä½œç”¨å°±æƒ³ä¹‹å‰æˆ‘ä»¬çš„è½¬æ€æå‡çš„providerä¸œè¥¿ä¸€æ ·
>

+ åœ¨æˆ‘ä»¬çš„providerç»„ä»¶åŒ…è£¹ç»„ä»¶ç»“æ„ï¼Œè¾¾åˆ°ç»Ÿä¸€ç»´æŠ¤storeçš„ç›®çš„

app.js

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597469143054-a58071db-d2e6-4f50-adb4-283249afa32b.png)

æ³¨æ„å•Šï¼Œè¿™é‡Œçš„è¿™ä¸ªè¯­æ³•è¿˜æœ‰proiveræ¥å—çš„å‚æ•°çš„å›ºå®šçš„è¯­æ³•

#### æœ‰äº†æä¾›è€…ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ¶ˆè´¹è€…
> è¿™ä¸ªæ¶ˆè´¹è€…å°±æ˜¯connectï¼Œconnectæ”¾å›ä¸€ä¸ªåŠ å¼ºä¹‹åçš„ç»„ä»¶HOC
>
> æ³¨æ„å•Šè¿™é‡Œçš„è¯­æ³•ï¼Œå®é™…ä¸Šæ˜¯å†…éƒ¨çš„å¤„ç†æ˜¯ä¸€ä¸ªHOCæ¨¡å¼,å®ƒåœ¨HOCå°è£…äº†ä¸€ä¸‹æŠŠå…¨å±€å¾—æˆ‘storeæ•°æ®åºŠåº•åˆ°äº†ç»„ä»¶å†…éƒ¨çš„propä¸Šï¼Œè¿™ç§è®¾è®¡å°±éå¸¸çš„å·§å¦™
>
> 
>

+ å‚æ•°é¡¹è¯´æ˜

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597469343994-943a541c-bd41-4156-ae03-8d7f36a77be4.png)

åœ¨å®˜æ–¹æ–‡æ¡£ä¸Šæ¯”è¾ƒéš¾ç†è§£ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å°±éå¸¸å®¹æ˜“çš„ç†è§£äº†

+ è¿™ä¸ªmapå’Œvueä¸Šçš„ä¸œè¥¿ä¹Ÿéå¸¸çš„ç±»ä¼¼
+ ç»„ä»¶Aæ˜¯å‘é€æ–¹ï¼Œéœ€è¦å®ç°ç¬¬äºŒä¸ªå‚æ•°

æ€è·¯ï¼š

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597469719464-3531e0d8-6bfa-4577-9443-880efb691d44.png)

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597469482840-2af0c63a-b809-410b-8a11-389a1065c511.png)

æˆ‘ä»¬è¿˜éœ€è¦æ–¹æ³•å»è§¦å‘å®ƒã€‚äºæ˜¯å°±æœ‰äº†hannClik

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597469615816-37ff7951-7e9d-4847-8a1f-8ac2d10ab405.png)

**<font style="color:#F5222D;">é‡ç‚¹è¯´æ˜ï¼šæˆ‘ä»¬çš„ruderverç¬¬ä¸€æ¬¡è¿›æ¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„reactç¬¬ä¸€æ¬¡åº•å±‚ä¸Šä¼šè¿›è¡Œè§¦å‘çš„ï¼Œç¬¬äºŒæ¬¡æ¥çš„æ—¶å€™ä¼šä¸ç¬¬ä¸€æ¬¡çš„å€¼è¿›è¡Œæ¯”è¾ƒå¦‚æœæ²¡æœ‰å˜å“ˆï¼Œé‚£ä¹ˆreactåº•å±‚ä¸Šä¸ä¼šæ‰§è¡Œçš„,å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿä½ éœ€è¦ä½¿ç”¨object.assing(  {},state,action )    å°±å¥½äº†ï¼Œè¿”å›æ–°çš„stateï¼Œè¿™æ ·å°±èƒ½æ¬ºéª—reactåº•å±‚äº†</font>**



+ æˆ‘ä»¬çš„Bç»„ä»¶éœ€è¦æ¥å—æ•°æ®ï¼Œ

æ€è·¯ï¼š

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597470255857-c5ba1fe1-8131-440d-bdcc-47ce3dcbf009.png)

1. åœ¨æˆ‘ä»¬çš„reduxä¸­åˆå§‹åŒ–å€¼ï¼Œè¿™ä¸ªè¿˜æ˜¯éå¸¸å…³é”®çš„ï¼Œåˆå§‹åŒ–å€¼

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597469972384-68e2d530-22a0-4a4c-a484-ffad3ec26616.png)

2. åœ¨ç»„ä»¶ä¸Š

ç»†èŠ‚è¯´æ˜ï¼Œå¦‚æœä½ çš„connectå›è‡ªåŠ¨ç»™ä½ ç”Ÿæˆç¬¬äºŒä¸ªå‚æ•°

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597470047109-257f9ea9-e1c4-4ba0-87c6-ad3f566bf5fe.png)



#### æ­£å¼çš„è¿›å…¥é€»è¾‘
reudcer,jsä¸­æ‰æ˜¯æˆ‘ä»¬æ­£åœ¨çš„é€»è¾‘ä»£ç æ‰€åœ¨

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597470210538-adf16b1e-9c65-42d4-836f-194061e9f6c6.png)

#### è¿™ä¸ªæ¡ˆä¾‹ä¸­æ•°æ®çš„æ‰­è½¬ï¼ŸğŸ˜‹


![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597470375202-45556499-4dcd-4de0-a9bf-a20e1f8cd612.png)



### éå¸¸é‡è¦ï¼Œéå¸¸é€šç”¨çš„è®¾è®¡æ¨¡å¼
![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597489909551-5dd2247a-7849-4436-adbc-a1de17dab23e.png)è‡ªå·±çš„ä¸ªäººç†è§£ï¼Œactionæ˜¯ä¸€ä¸ªè½½ä½“è¡¨ç¤ºå°†è¦åšä»€ä¹ˆï¼Œreduceræ˜¯æ¥å—actionå‚æ•°ï¼Œå¤„ç†ä¸€äº›æ•°æ®ï¼Œæ•°reduceræ˜¯æ•°æ®çš„æ›´æ”¹åˆå§‹åŒ–çš„åœ°æ–¹ï¼Œstoreæ˜¯ç®¡ç†å®ç°rudeuxå’Œcompensationé€šä¿¡çš„å®¹å™¨





### combineReducers
#### æ¦‚è¿°å’Œä»‹ç»
> æˆ‘ä»¬çš„ä¹‹å‰å†™çš„ä»£ç ä»…ä»…æ˜¯ä¸€ä¸ªreducerï¼Œå¦‚æœé¡¹ç›®éå¸¸çš„å¤§ï¼Œä½ åªæœ‰ä¸€ä¸ªreducerå®Œæˆèµ·æ¥å°±ä¼šéå¸¸çš„éº»çƒ¦ï¼Œå› æ­¤è¿™ä¸ªä¸œè¥¿å°±å‡ºæ¥äº†ï¼Œå®ƒå¯ä»¥ç®¡ç†å¤šä¸ªreducer
>



![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597490552676-516a8728-be3c-41e8-b7af-98df07744e44.png)



è¯­æ³•æ˜¯éå¸¸çš„ç®€å•

```javascript
combineReducersæ˜¯ä¸€ä¸ªå‡½æ•° è¿”å›ç»„åˆä¹‹åçš„æ€»çš„å¤§çš„ï¼Œreducer

const reducers = {
	home:HomeReducer,
  login:LoginReducer,
}

 exprot  combineReducers( reducers  )


```



### æ¡ˆä¾‹æ—¶é—´åˆ°äº†
> æˆ‘ä»¬å°†ä¼šå­¦ä¹ åˆ°å¦‚ä¸‹çš„çŸ¥è¯†ç‚¹
>
> 
>
> 
>

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597490800541-50e96fe7-a9d7-4b24-a2c4-6d882a88195f.png)



æˆ‘ä»¬éœ€è¦å®Œæˆè¿™æ ·çš„ä¸€ä¸ªéœ€æ±‚

ä¸¤ä¸ªç»„ä»¶ï¼Œè¿™ä¸¤ä¸ªç»„ä»¶æœ‰å„è‡ªçš„æŒ‰é’®ï¼Œç‚¹å‡»çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡reduxè·å–åˆ°å„è‡ªå¯¹åº”reducerçš„æ•°æ®ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªreduceræ•°æ®ï¼Œç°åœ¨æˆ‘ä»¬å¸Œæœ›ä½¿ä½¿ç”¨combineRuducersæ¥æ”¹é€ å®ƒã€‚



#### æ¡ˆä¾‹å‡†å¤‡ ï¼ˆæ²¡ç”¨ä½¿ç”¨combineRuducersçš„æ—¶å€™ï¼‰
![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597490939778-a6c76996-1250-444c-bddc-d2a7c7babfa8.png)



> ä»£ç å¦‚ä¸‹
>
> é¡¹ç›®çš„ç›®å½•ç»“æ„
>

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597491640470-9f543084-3ce1-4b4d-b63d-6acc599c90fb.png)

// æ³¨æ„å•Š ï¼Œç°åœ¨æˆ‘ä»¬çš„ä¸€ä¸ªç»„ä»¶éœ€è¦

./comA

```javascript
import React from 'react';

import { connet } from 'react-redux'

class ComA extends React.Component {
  constructor(props) {
    super(props);
  }

  handerClick = () => {
    this.props.getUser()
  }
  
  render () {
    return (
      <>
        <button onClick={handerClick}>ç‚¹å‡»æˆ‘è·å–ç”¨æˆ·æ•°æ®</button>
        <ul>
          <li>å§“åï¼š{}</li>
          <li>é‚®ç®±ï¼š{}</li>
        </ul>
      </>
    );
  }
}

mapStateToProps = (state) => {
  return state
}

mapDispatchToProps = (dispatch) => {
  return {
    getUser = () => {
      dispatch({
        type: 'GET_USER'
      })
    }
  }
}
export default connet(mapStateToProps, mapDispatchToProps)(ComA);

```

/comBæ˜¯ä¸Aç±»ä¼¼çš„ï¼Œè¿™é‡Œå°±ä¸å†™äº†



/sotre/reducers/index

```javascript

const ininSatte = {}
export function rootReducer (state = ininSatte, action) {
  return Object.assign({}, state, action)
}

```



/sotre/index.js

```javascript

import {  createStore } from 'redux'
import {  rootRoducer } from '../store/reducer'
export default createStore(rootRoducer)


```





/App

> appè¿™é‡Œéå¸¸çš„ç®€å•è¿™é‡Œå°±æ²¡æœ‰å†™äº†ï¼Œappä¸Šç›´æ¥åŒ…è£¹ä¸Šä¸€ä¸ªproderså°±å¥½äº†
>





### åœ¨rooteReduxä¸­å¯¹actionè¿›è¡Œç»Ÿä¸€çš„å¤„ç†
æˆ‘ä»¬å®šä¹‰äº†ä¸€äº›æ•°æ®ï¼Œåœ¨ä¸€ä¸ªreduceré‡Œçš„ä»£ç 

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597495807263-58346268-ab20-4cf4-89cb-950ff6773821.png)





å¯¹æˆ‘ä»¬çš„è¿™ä¸ªrootReducerè¿›è¡Œä¸€ä¸ªæ”¹é€ 

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597495951322-417989b9-bbd8-4c2f-b6a7-7c625b46f237.png)









å¯¹æˆ‘ä»¬çš„è¿™ä¸ªComAè¿˜æœ‰ComBè¿›è¡Œä¸€ä¸ªæ”¹é€ 

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597495928863-1051176b-07bd-42e4-a6b1-3d2841e7c749.png)



### ä½¿ç”¨combineè¿›è¡Œæ‹†åˆ†
![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597543149303-bfd2855b-a619-4b3c-b6bc-45eb8d32ea8b.png)



> è¿™é‡Œåªç»™å‡ºäº†æœ€æ ¸å¿ƒçš„å‡ ä¸ªä»£ç 
>

+ é¦–å…ˆæ˜¯æˆ‘ä»¬çš„æ”¹é€ çš„æ–‡ä»¶å¤¹ç›®å½•ç»“æ„ï¼Œè¿™é‡Œå°±è¯¦ç»†çš„è¯´æ˜äº†ï¼Œå®é™…ä¸Šå°±æ”¹äº†æ–‡ä»¶å¤¹çš„ç»„ç»‡æ–¹å¼ï¼Œå’Œæ–°å‘½åäº†è¿™ä¸ªæ–‡ä»¶

ç„¶åæ˜¯æˆ‘ä»¬çš„è¿™ä¸ªè¯¥æ”¹é€ ä¹‹åçš„ä¸¤ä¸ªå­reducer

UserReducer

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597543650218-4c372f5e-0e47-4eda-b5f5-9b40ffe9b93d.png)



å¦ä¸€ä¸ªä¹Ÿæ˜¯æ˜¯ä¸€æ ·çš„

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597543655357-389dc37e-8f92-47ba-929f-fd722874c055.png)



+ ç„¶åæ˜¯æˆ‘ä»¬çš„å¼•å…¥

/store/index.js

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597543842336-c65a967a-b2ed-4ee5-adf0-edb281e3a1a3.png)



+ æ³¨æ„å•Šæˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™ä¹Ÿéœ€è¦ç»è¿‡ä¸€èˆ¬æ”¹é€ 

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597543823296-f3808d6d-1d12-489c-a198-7d03aab3da22.png)

å…·ä½“çš„ç»„ä»¶å†…çš„ä½¿ç”¨

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597543786180-0fd6df2a-2f2f-4561-9852-ab3295fb76e8.png)





### ç‰¹ç‚¹è¯´æ˜
![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597544279125-b7118659-8c4f-4874-b35f-c19d3cc039d0.png)

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597544124881-71062cbe-ae6a-41b1-b7a4-86942ecf702b.png)\\\ç¬¬äºŒä¸ªç‰¹ç‚¹

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597544299061-1c9458f4-613f-46aa-aadc-582041a684d5.png)



   ç¬¬ä¸‰ä¸ªç‰¹ç‚¹ é‡è¦ï¼

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597544326697-c5458c53-db3a-4e98-9d60-c386b1383c98.png)

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597544188680-dcac48ab-dd48-4689-9871-62770c2eba3f.png)



### ç»¼åˆæ¡ˆä¾‹ï¼Œä¹¦åŸ
> è¿™ä¸ªæ¡ˆä¾‹ä¸šåŠ¡é€»è¾‘ç¨å¾®æœ‰äº›å¤æ‚ï¼Œä½†æ˜¯æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€æ ·çš„å¥—è·¯ï¼Œæœ¬äººåœ¨bç«™æ‰¾äº†ä¸€äº›ä¸é”™çš„èµ„æº
>
> æ•™ç¨‹çš„åœ°å€ï¼šâ€˜[https://www.bilibili.com/video/BV1v741127cL?p=10](https://www.bilibili.com/video/BV1v741127cL?p=10)
>



æ ¸å¿ƒæ€è·¯å¦‚ä¸‹

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597547081872-8af2b39d-46b0-4d3c-b6a6-e1a702a62652.png)

åˆ†æ­¥éª¤çš„æ¡ˆä¾‹å¦‚ä¸‹

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597547108433-b4c4ff16-f5e6-4c3a-906f-b7ea1aeaa278.png)

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597547127667-a309f7d9-5949-405d-8acf-c8acd407fd87.png)





## redux-sagaï¼ˆå¤„ç†å¼‚æ­¥ï¼‰
> å®˜æ–¹APIï¼Œè¯·è‡ªè¡Œæœç”¨ï¼Œ[saga](https://redux-saga-in-chinese.js.org/)
>

### ç®€ä»‹
1. ä¸­é—´ä»¶

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597547728932-34975320-7b0f-48cc-b529-65a991d777ce.png)

> æ€»ç»“ä¸€å¥å“ˆï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸­é—´ä»¶ï¼Œæ‹¦æˆªä¸€ä¸‹action ï¼Œå†æŠŠaction æ”¾å‡ºå»
>

2. sageçš„æ ¸å¿ƒï¼Œè¾…åŠ©å‡½æ•° + effect

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597547758386-dbaac85b-4f6e-4069-95aa-7bdbf3a52328.png)



### Sageç›¸å…³çš„apiä»‹ç»
> è¿™ä¸€è®²ï¼Œä¸»è¦æ˜¯å°†çš„æ˜¯å¦‚ä½•è¿›è¡Œä¸storeçš„å…³è”
>

/sage/index

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597548051915-7cf610f1-bf7b-4feb-ae8c-50a01c9c8e4e.png)

> æ³¨æ„å•Šã€‚ä¸€æ­¥ä»…ä»…æ˜¯å»ºç«‹äº†è”ç³»ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬çš„è‡ªå·±å»ºç«‹çš„sage/index.jsä¸‹æ²¡æœ‰ä»€ä¹ˆä»£ç ã€‚æ‰€ä»¥ä½ ï¼Œå°±ç®—ä½ åœ¨ç»„ä»¶å‘é€äº†dispatchä¹Ÿæ˜¯ä¸ä¼šæœ‰ä»€ä¹ˆæ•ˆæœçš„ï¼Œå› ä¸ºæ²¡æœ‰åœ¨sagaä¸­Â  Â Â ç›‘å¬
>

### sagaçš„è¾…åŠ©å‡½æ•°çš„è¯´æ˜
ä»¥ä¸‹çš„æ˜¯ä¸œè¥¿ ï¼Œæ˜¯ä¸€ä¸ªç®€å•çš„sagaå‡½æ•°çš„è¯´æ˜é¡¹ï¼Œå®˜æ–¹çš„æ–‡æ¡£æ¯”è¾ƒæ™¦æ¶©éš¾æ‡‚ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ ¹æ®ä»£ç çš„æ¥çœ‹å…·ä½“çš„ä½œç”¨æ˜¯ä»€ä¹ˆ

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597553903682-c18c300d-6027-48a5-9129-ebfd47331c40.png)



ç»„ä»·çš„è§¦å‘äº‹ä»¶ï¼Œè¿™ä¸ªå’Œæˆ‘ä»¬æˆ‘ä»¬ä¹‹å‰å†™çš„éƒ½æ˜¯ä¸€æ¯›ä¸€æ ·çš„ï¼Œæ²¡æœ‰ä»€ä¹ˆä¸åŒç›´æ¥å‘actionå°±å¥½äº†

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597554054969-f5cf726d-9270-4301-9f08-3aa824c5886e.png)



åœ¨æˆ‘ä»¬çš„store/sage/index.jsä¸­è¿›è¡Œç›‘å¬ï¼Œæ³¨æ„å•Šè¿™é‡Œçš„es6çš„æ–°ç‰¹ç‚¹Â  yieldå‡½æ•°Â Â 



![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597554123800-8b4c031c-00d4-46ad-9035-1e9b4ddb45d7.png)

#### ä¸‰ä¸ªè¾…åŠ©å‡½æ•°çš„è¯´æ˜
æˆ‘ä»¬æ¥è¯·æ±‚æ¥å£ï¼Œçœ‹çœ‹å…·ä½“çš„åŒºåˆ«æ˜¯ä»€ä¹ˆã€‚è¿™é‡Œæˆ‘ä»¬ç›´æ¥å†™åœ¨sageä¸­ï¼Œè¿›è¡Œäº†ä¸€äº›æ‹¦æˆªå¤„ç†è¿˜æœ‰è¾…åŠ©å‡½æ•°çš„ä½¿ç”¨

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597554523692-aa0b989e-4595-4152-bc09-5a972ea7232d.png)

è¿™ä¸‰ä¸ªè¾…åŠ©å‡½æ•°çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597554761203-5a530ea3-581a-475e-bf72-d8c201b8f1c0.png)



### Effectå‡½æ•°
![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597554896250-29b9ccd8-c5c7-4854-98cb-ae1d0d16b4ad.png)



è¿™é‡Œæœ‰å¿…è¦è¯´ä¸€ä¸‹takeçš„ä¸œè¥¿ï¼Œtakeå°±æ˜¯runçš„æ—¶å€™å°±å µå¡ï¼ŒåŒ¹é…åˆ°ä¹‹åå°±æ¥ç€è¿›è¡Œ

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597555126808-98e37ecc-0ee6-4a2b-8de1-f2babd4e0d8c.png)



+ å‘é€actionå°±èƒ½å‘é€å‡ºå»action
+ ![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597555200953-680ba0f3-003a-4671-adb0-ac5ec48a271f.png)



reducerä¸­å¦‚ä½•æ¥å—åˆ°äº†å‘¢ï¼Ÿï¼Œæ³¨æ„å•Šè¿™çº¦å®šä¿—æˆï¼Œæˆ‘ä»¬çš„è¿™object.assginaæ˜¯æœ€çº¦å®šä¿—æˆçš„æ–¹æ³•

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597555299079-81cbb7dc-8149-4d4c-9ef2-af858f205c52.png)



æ€»ç»“

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597555692181-fffe519e-992a-41cb-8db9-e41f7a480ca4.png)

## é¡¹ç›®å®æˆ˜
### åˆå§‹åŒ–é¡¹ç›®å‡†å¤‡action, reducer,åˆ†æ¨¡å—çš„saga
> å­¦ä»¥è‡´ç”¨ï¼Œæˆ‘ä»¬æ¥å®Œæˆä¸€ä¸ªé¡¹ç›®çš„å®æˆ˜å§ï¼æ¡ˆä¾‹æè¿°ï¼Œæˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªå¼‚æ­¥ç½‘ç»œè¯·æ±‚çš„åœ¨çº¿ä¹¦åŸé¡¹ç›®
>
> æ³¨æ„å•Šï¼Œè¿™é‡Œå®é™…ä¸Šè¿˜æœ‰æˆ‘ä»¬çš„reduceræˆ‘ä»¬è¿˜æ²¡æœ‰å†™ï¼Œä½ éœ€è¦è‡ªå·±å†™ä¸€ä¸‹
>
> ![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597725921037-adb7685e-e64f-4fda-a330-81d78ea0a0d1.png)
>
> 
>
> æˆ‘ä»¬çš„acitonç±»å‹å¸¸é‡ä¹Ÿéœ€è¦è‡ªå·±è®¾ç½®ä¸€ä¸‹
>
> ![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597727695238-df74da3d-d7eb-4607-a1b2-171d6486ca38.png)
>
> 
>
> è¿™ä¸¤ä¸ªreducerä¸­å†™çš„ä¸œè¥¿å’Œæˆ‘ä»¬ä¹‹å‰å†™çš„ä¸œè¥¿æ˜¯ä¸€æ¯›ä¸€æ ·çš„ï¼Œæ²¡æœ‰ä»»ä½•çš„å˜åŒ–ï¼Œæˆ‘ä»¬çš„å˜åŒ–åªæ˜¯é›†ä¸­åœ¨sagaæ–‡ä»¶ä¸­æ‹¦æˆªåšå¯¹åº”çš„å¤„ç†
>
> 
>
> ![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597725469937-a0aee407-1b99-4729-ac03-2025e8c914ff.png)
>
> 
>





è¦ç‚¹å°±æ˜¯åŒæ—¶è¿è¡Œä¸¤ä¸ªsagaè¿™ä¸ªæ˜¯ä¸€ä¸ªè¦ç‚¹

/saga/index.

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597725691825-72610bd6-487c-4830-a118-e37ca0b89ac6.png)



/sore/index/jsã€‚è¿›è¡Œæˆ‘ä»¬çš„æ•°æ®ç®¡ç†

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597725774374-11d590ad-3d0f-446d-a802-48576a661a35.png)





### å®ç°ç™»å½•
1. æ€è·¯çš„è®²è§£

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597726414812-23a77096-1c4a-4b52-ab9f-abdd8021350f.png)

2. é‡ç‚¹è¯´æ˜
+ ç™»å½•çš„saga å¤„ç†é€»è¾‘

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597726782260-a7bb3fa9-bfe2-4654-a83e-b107df9c8a1a.png)



+ ç™»å½•çš„rudecerå¦‚ä½•æ‹¿åˆ°æ•°æ®ä¹‹åå¦‚ä½•å¤„ç†

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597726854765-f8927e79-2ded-43b9-bcf3-52efccb63db4.png)

+ å‰å°çš„è§¦å‘æ¡ä»¶

æˆ‘ä»¬çš„mapæŠŠreduxä¸­çš„storeè¿›è¡Œæ˜ å°„åˆ°äº†å½“å‰ç»„ä»¶çš„propsä¸Šï¼Œå¦‚æœæœ‰è¯·æ±‚å°±è¯´æ˜propå˜äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦åœ¨ç»„ä»¶çš„å†…éƒ¨è¿›è¡Œä¸€å®šæ›´æ–°å¤„ç†

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597727053150-40615760-1cdb-4a32-b295-0b0f03532080.png)

åç»­çš„æ“ä½œå°±æ˜¯è¿›è¡Œä¸šåŠ¡çš„å¤„ç†ï¼Œè¿™é‡Œå°±ä¸è¯¦ç»†çš„å±•å¼€äº†



### ä¹¦ç±çš„åˆ—è¡¨æ•°æ®
> æ€è·¯éƒ½æ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œå°±ä¸å±•ç¤ºæºä»£ç äº†
>
> ![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597727231711-96f9dfee-df9a-41a2-9cde-b2d4a7658b5c.png)
>

1. ç»„ä»¶çš„åŠ è½½çš„æ—¶å€™ç›´æ¥è§¦å‘é’©å­å‡½æ•°ï¼Œå‘é€actionè¯·æ±‚æ•°æ®

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597727502043-75f4fe5b-6f53-4a32-8666-52bba6ae2b66.png)

2. åœ¨sagaä¸­è¿›è¡Œç›‘å¬actionï¼Œå¹¶ä¸”è¯·æ±‚æ•°æ®

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597727613368-2a2dbe9c-2bf5-4835-8c67-b677641a4af1.png)

3. æœ€åä½ éœ€è¦putä¸€ä¸‹æŠŠè·å–åˆ°çš„æ•°æ®ä¸¢å‡ºå»

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597727765373-c4b6ef6e-a234-4574-b80f-7308f28a4b6c.png)4

4. åœ¨reduceré‡Œï¼Œè¿›è¡Œæ•°æ®çš„æ”¾å›

![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597727830863-e144e6a2-e867-4fd7-be76-2e05da6d894a.png)

5. åœ¨ç›¸å¯¹åº”çš„ç»„ä»¶é¡µé¢è¿›è¡Œæ•°æ®å¤„ç†å°±å¥½äº†



![](https://cdn.nlark.com/yuque/0/2020/png/1627571/1597728037213-24b2f619-bc12-4c27-8ef0-c786a90ce13d.png)

æ³¨æ„å•Šï¼Œè¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œä¸éœ€è¦ç›´æ¥èµ‹å€¼ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨redernå‡½æ•°ä¸­ï¼Œé¡µé¢ç¬¬ä¸€æ¬¡çš„æ—¶å€™å°±ç›´æ¥è§£æ„åŠ è½½aäº†



