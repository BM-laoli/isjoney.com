---
title: "Go æ ¸å¿ƒåŸºç¡€ï¼šåŒ…ç®¡ç†ã€æ•°æ®ç±»å‹ä¸å¸¸ç”¨ç»“æ„"
date: "2024-12-19"
summary: "ç³»ç»Ÿå­¦ä¹  Golang åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…æ‹¬åŒ…ç®¡ç†æœºåˆ¶ã€å˜é‡ä¸å¸¸é‡ã€æ•°ç»„ä¸åˆ‡ç‰‡ã€Map æ“ä½œåŠå­—ç¬¦ä¸²å¤„ç†ç­‰æ ¸å¿ƒæ¦‚å¿µã€‚"
status: "completed"
tech: ["Golang", "Package", "DataTypes"]
github: "https://github.com/BM-laoli"
arxiv: ""
keyId: "Go"
---

> æœ¬æ–‡æ¡£ä¸»è¦æ˜¯å›é¡¾å’Œå­¦ä¹  Golang ï¼Œè¯¾ç¨‹æ¥è‡ªè”¡è¶…ï¼ˆæ³¨æ„æœ¬è®²åº§å†…å®¹æ¯”è¾ƒåˆ†æ•£ï¼Œä½ éœ€è¦é›†ä¸­çš„è¿›è¡Œå½’çº³å’Œæ€»ç»“é¢ï¼‰
>



## ç®€å•çš„ä»‹ç»
goåªæœ‰25ä¸ªå…³ç´§å­—ï¼Œgoæ˜¯ç¼–è¯‘çš„å¼ºç±»å‹è¯­è¨€ï¼Œæ”¯æŒè‡ªåŠ¨GC å’ŒæŒ‡é’ˆè®¿é—®ï¼Œç”Ÿäº§åŠ›å¾ˆå¼ºå¤§ï¼ŒGoåªæœ‰ å¤åˆ FFPï¼ŒOPPæ˜¯ä¸çº¯åœ¨çš„ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨FPçš„æ¨¡å¼æ¥æ¨¡æ‹Ÿå®ƒï¼Œå¦å¤–åŒºå—é“¾å¼€å‘è¯­è¨€ä¹Ÿæ˜¯golang



install goçš„è¯éå¸¸çš„ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦å»  [https://www.runoob.com/go/go-environment.html](https://www.runoob.com/go/go-environment.html)ï¼Œ å¯¹äºMacç”¨æˆ·æˆ‘ä»¬åªéœ€è¦brew install go å°±å¥½äº†ã€‚



1.8 ç‰ˆæœ¬ä¹‹ç«å¿…é¡»è®¾ç½®ç¯å¢ƒå˜é‡ ( ä½†æ˜¯è°tmçš„ç°åœ¨è¿˜åœ¨ä½¿ç”¨go 1.8ï¼Ÿå¤§å¤šæ•°éƒ½æ˜¯11å¾€ä¸Šäº† )  



IDEçš„è¯ï¼Œæˆ‘ä»¬ä½¿ç”¨Vscode ä½¿ç”¨çš„æ—¶å€™éœ€è¦æ³¨æ„ï¼Œåªèƒ½ä¸€æ¬¡æ‰“å¼€ä¸€ä¸ªworkspce è¦ä¸ç„¶ä¼šæœ‰é—®é¢˜



## ä»ä¸€ä¸ªæœ€ç®€å•ç¨‹åºæ¥çœ‹go
### pkgæ˜¯ä»€ä¹ˆé¬¼
é¡¹ç›®ä¸­çš„åŒ…packgeæ˜¯ä»€ä¹ˆçš„é¬¼å‘¢ï¼Ÿç±»ä¼¼å‰ç«¯çš„moduleåŒ– ï¼Œä¸¾ä¾‹ä¸‹é¢çš„é¡¹ç›®ï¼Œä¸­çš„pkgæ–‡ä»¶å¤¹ğŸ“ã€‚é¡¹ç›®ä¸­çš„pkgå°±æ˜¯è¿™ä¸ªç¨‹åºæ‰€éœ€è¦ç”¨åˆ°çš„æ‰€æœ‰çš„pkgäº†ï¼Œæˆ‘ä»¬æ‹¿é‡Œé¢çš„ä¸€ä¸ªæœ€ç®€å•çš„ä¸œè¥¿æ¥ä¸¾ä¸ªä¾‹å­ğŸŒ° çœ‹çœ‹pkgåˆ°åº•å¦‚ä½•ä½¿ç”¨,æ¯”å¦‚ file è¿™ä¸ªpkgï¼Œå®ƒçš„ä½œç”¨æ—¶ å¤„ç†æ–‡ä»¶

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1650467463441-b38587ae-2ff9-4a74-b6be-442f2b9b5073.png)

ä»£ç æˆ‘ä»¬æ”¾ä¸€å°æ®µå‡ºæ¥

```go
package file

import (
	"fmt"
	"io/ioutil"
	"mime/multipart"
	"os"
	"path"
)

// åœ¨è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°äº† mime/multipart åŒ…ï¼ˆå…ˆä¸ç”¨ç®¡è¿™ä¸ªåŒ…ï¼‰ï¼Œå®ƒä¸»è¦å®ç°äº† MIME çš„ multipart è§£æ
// è·å–æ–‡ä»¶å¤§å° å­—èŠ‚
func GetSize(f multipart.File) (int, error) {
	content, err := ioutil.ReadAll(f)

	return len(content), err
}

// è·å–æ–‡ä»¶åç¼€
func GetExt(fileName string) string {
	return path.Ext(fileName)
}

// çœ‹çœ‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨
func CheckNotExist(src string) bool {
	_, err := os.Stat(src)

	return os.IsNotExist(err)
}

// çœ‹çœ‹æœ‰æ²¡æœ‰æƒé™
func CheckPermission(src string) bool {
	// å…·ä½“å®ç°çœç•¥
}

// å¦‚æœæ²¡æœ‰å°±åˆ›å»ºæ–‡ä»¶å¤¹
func IsNotExistMkDir(src string) error {
	// å…·ä½“å®ç°çœç•¥
}

// åˆ›å»ºæ–‡ä»¶å¤¹
func MkDir(src string) error {
	// å…·ä½“å®ç°çœç•¥
}

// æ‰“å¼€æ–‡ä»¶
func Open(name string, flag int, perm os.FileMode) (*os.File, error) {
// å…·ä½“å®ç°çœç•¥
}

// MustOpen maximize trying to open the file
func MustOpen(fileName, filePath string) (*os.File, error) {
// å…·ä½“å®ç°çœç•¥
}

```

ç„¶åæˆ‘ä»¬çœ‹çœ‹åœ¨é¡¹ç›®ä¸­æ˜¯å¦‚ä½•ä½¿ç”¨çš„ã€‚æˆ‘ä»¬å…ˆçœ‹è¿™ä¸ªpackgeçš„åå­—å«åšfile å’Œæ–‡ä»¶å¤¹ä¿å­˜ä¸€è‡´ï¼ˆè¿™æ˜¯ä¸€ç§è§„èŒƒï¼‰

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1650467727647-b81b77ec-1f04-4e0f-aef2-a324c529eba8.png)

åœ¨pkg upload ä¸‹ä½¿ç”¨äº†

```go
package upload

import (
	"fmt"
	"log"
	"mime/multipart"
	"os"
	"path"
	"strings"

	"github.com/BM-laoli/go-gin-example/pkg/file"  // é‡ç‚¹æ˜¯è¿™ä¸ª 
	"github.com/BM-laoli/go-gin-example/pkg/logging"
	"github.com/BM-laoli/go-gin-example/pkg/setting"
	util "github.com/BM-laoli/go-gin-example/utils"
)
// è¿™é‡Œé¢æœ‰äº› github.com/BM-laoli/go-gin-example/pkg/file å…ˆä¸ç”¨ç®¡ï¼Œè¿™ä¸ªä¸œè¥¿å’Œä½ é¡¹ç›®æ˜¯ç›¸å…³çš„ï¼Œåé¢ä¼šè®²ï¼Œç›®å‰ä½ å¯ä»¥ç†è§£è¿™ä¸ªå°±æ˜¯ä½ æœ¬åœ°çš„é‚£ä¸ªpkg file
```

### goä¸­çš„node_modules
æˆ‘ä»¬å‰é¢æœ‰ä»‹ç»åœ¨goä¸­å¦‚ä½•å¼•å…¶ä»–åŒ…ï¼Œä½†æ˜¯æˆ‘ä»¬è²Œä¼¼å¿˜è®°äº†éå¸¸é‡è¦çš„ä¸€ç‚¹ï¼Œå°±è¯´goä¸­çš„åŒ…ç®¡ç†åˆ°åº•æ˜¯å¦‚ä½•åšçš„ï¼Œæ¥ä¸‹æ¥ å¼•ç”¨çŸ¥ä¹é«˜èµ [https://zhuanlan.zhihu.com/p/269719543](https://zhuanlan.zhihu.com/p/269719543)ï¼Œæ¥ç»™å¤§å®¶ç†æ¸…æ¥šgoä¸­åŒ…ç®¡ç†é—®é¢˜ï¼Œæˆ‘ä¸ªäººéå¸¸å–œæ¬¢ä½¿ç”¨è¡¨æ ¼æ¥æ€»ç»“çŸ¥è¯†ç‚¹ï¼Œè¿™éå¸¸çš„é«˜æ•ˆä¸”æ–¹ä¾¿è®°å¿†

1. æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åˆå§‹åŒ–ä¸€ä¸ªåŒ… ï¼ˆç±»æ¯”äº npm initï¼‰

```shell
mkdir yourfiles
cd yourfiles
# å»ºè®®name å’Œä½ çš„æ–‡ä»¶å¤¹ä¿å­˜ä¸€è‡´
go mod init yourname 


```

2. å¦‚ä½•åœ¨åŒ…é‡Œäº’ç›¸çš„å¼•ç”¨ï¼ˆå°±åƒimport xxxå‰ç«¯ä¸€æ ·ï¼‰

æœ‰äº†åŒ…ä¹‹åï¼Œæˆ‘ä»¬æ¥ç»„ç»‡ä¸€ä¸‹æˆ‘ä»¬çš„é¡¹ç›®ç»“æ„

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1651224083962-106a25b5-027f-4ecd-812e-373e49fb231e.png)

```go
# model
package model

import "fmt"

func GetModalName() {
	fmt.Println("GetModalName")
}

# utils
package utils

import "fmt"

func GetUtilsName() {
	fmt.Println("GetUtilsName")
}
package test_main

import "testing"

func TestXXX(t *testing.T) {
	t.Log("Testing")
}

# test
package test_main

import "testing"

func TestXXX(t *testing.T) {
	t.Log("Testing")
}

# main
package main

import (
	"c2/modl/pkg/model"
	"c2/modl/pkg/utils"
	"fmt"
)

func main() {
	fmt.Println("222")
	model.GetModalName()
	utils.GetUtilsName()

}

```



3. çœ‹çœ‹å¦‚ä½•æµ‹è¯• ï¼ˆgoä¸­æœ‰è‡ªå¸¦çš„å•å…ƒæµ‹è¯•ï¼‰

å¦‚æœä½  ä½¿ç”¨vscode é‚£ä¹ˆå¾ˆæ–¹ä¾¿ï¼Œç‚¹ä¸€å°±å¥½äº†ï¼Œå¦‚æœæ²¡æœ‰ä¹Ÿä¸è¦æ…Œ ä½¿ç”¨ shell go cli å»æ‰§è¡Œ

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1651224233162-bb2237b1-4aa9-4adf-bedc-722cfe932069.png)

```shell
# æ³¨æ„å•Š ä¸€å®šè¦è¿›åˆ°æ–‡ä»¶å¤¹é‡Œé¢å»
cd ./test/
go test 

```

4. å¦‚ä½•install äº’è”ç½‘ä¸Šçš„åŒ… æ¯”å¦‚rsc.io

rsc.io/sampler æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Ÿè¿™é‡Œæœ‰å®ƒçš„æ–‡æ¡£ [https://pkg.go.dev/rsc.io/quote#section-readme](https://pkg.go.dev/rsc.io/quote#section-readme)



```shell
go get rsc.io/sampler
```

ä½¿ç”¨å®ƒä¹Ÿæ˜¯éå¸¸çš„ç®€å•

```go
# main
import (
	"c2/modl/pkg/model"
	"c2/modl/pkg/utils"
	"fmt"
    "rsc.io/quote"
)

func main() {
	fmt.Println("222")
	model.GetModalName()
	utils.GetUtilsName()
    Hello()
}

func Hello() string {
    return quote.Hello()
}



```

 5. é‚£ä¹ˆæˆ‘æœ‰æ²¡æœ‰å®ƒçš„npmå‘¢ï¼Ÿå½“ç„¶äº†  [https://pkg.go.dev/](https://pkg.go.dev/) è¿™ä¸ªå°±è¯´go çš„npm å“ˆå“ˆå“ˆ



æ€»ç»“ä¸€ä¸‹æœ€åçš„æµç¨‹

![ç”»æ¿](https://cdn.nlark.com/yuque/0/2022/jpeg/1627571/1651224970490-1a6d1994-be45-4480-83b0-2ee70f880567.jpeg)



### goçš„è¿è¡Œæ–¹å¼
goçš„è¿è¡Œ æœ‰ä¸¤ç§æ–¹å¼ï¼Œç›´æ¥run / ç¼–è¯‘ç”ŸæˆäºŒè¿›åˆ¶ï¼ˆgoä¼šè‡ªåŠ¨é™æ€è¿æ¥ğŸ”—ï¼‰ä¸€ä¸ªç‹¬ç«‹çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œé€šè¿‡å®¹å™¨éƒ¨ç½²éå¸¸çš„æ–¹ä¾¿

```shell
# ç›´æ¥run ä¸€èˆ¬æœ¬åœ°å¼€å‘è¿™æ ·ç”¨
go run main.go

# ä¸€èˆ¬build éƒ¨ç½²çš„æ—¶å€™ä½¿ç”¨äºŒè¿›åˆ¶
go build main.go
```

<font style="color:#E8323C;"></font>

### <font style="color:#E8323C;">æ³¨æ„äº‹é¡¹</font>
<font style="color:#E8323C;">1.å…³äºå…¥å£æ–‡ä»¶ å¿…é¡»ä¸ŠmainåŒ…:package main</font>

<font style="color:#E8323C;">2.å…³äºå…¥å£æ–‡ä»¶ å¿…é¡»ä¸Šmainæ–¹æ³•:func main()   
</font><font style="color:#E8323C;">3.å…³äºå…¥å£æ–‡ä»¶ ä¸ä¸€å®šè¯´main.go</font>

è¿™äº›æ³¨æ„äº‹é¡¹ï¼Œé€šè¿‡ä¸Šé¢çš„ä¾‹å­ä½ åº”è¯¥ä¹Ÿäº†è§£ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ã€‚æ¯”å¦‚ä¸‹é¢ç»“æ„çš„ä»£ç æœ‰mainæ–¹æ³•ï¼Œä»–ä»¬éƒ½å¯ä»¥ç‹¬ç«‹è¿è¡Œ go run hellw.go / go run main.go

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1650468145412-468c334d-c588-4d94-960d-f34bae1fd056.png)

### é€€å‡ºè¿”å›å€¼å’Œ æ§åˆ¶å°å‚æ•°çš„æ¥å—
Go ä¸­çš„mian ä¸æ”¯æŒè¿”å›å€¼ï¼Œå¦‚æœè¦è¿”å›ç¨‹åºé€€å‡ºæ—¶çš„çŠ¶æ€ï¼Œéœ€è¦é€šè¿‡ä¸‹é¢çš„è¯­æ³• os.Exit() / os.Exit(-1)

```go
package main

import (
	"fmt"
	"os"
)

func main() {
	fmt.Println("Hello word")
	// os.Exit() ä¸¤ç§éƒ½å¯ä»¥åŒºåˆ«ä»€ä¹ˆçš„åé¢åœ¨è¯´
	os.Exit(-1)
}

```

  
mainå‡½æ•°ä¸æ”¯æŒ å‚æ•° ï¼Œä½†æ˜¯ä½ å¯ä»¥os.Argsè·å–å‘½ä»¤è¡Œå‚æ•°,æ¯”å¦‚ä¸‹é¢çš„ä»£ç 

```go
package main

import (
	"fmt"
	"os"
)

func main() {
    if len(os.Args) > 1 {
        fmt.Println("6666===>", os.Args[1])
    }
}

```

è¿è¡Œ

```shell
go run main chanex
# ä¸Šé¢çš„chanex è¿™ä¸ªå‚æ•°å°±ä¼šè¢«æ‹¿è¿›æ¥äº†
```



## å˜é‡ä»¥åŠæ•°æ®ç±»å‹
æ­¤å†…å®¹çš„å‰ææ¡ä»¶æ˜¯ï¼šä½ çš„go mod å·²ç»åˆå§‹åŒ–å®Œæ¯•ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ å˜é‡ï¼Œ ä½¿ç”¨ä½ éœ€è¦ä½¿ç”¨var å£°æ˜ï¼Œè¿™æ˜¯å¯é€‰çš„

### åŠå…¶ç®€å•çš„å˜é‡å’Œå¸¸é‡
```go
package test

import (
	"fmt"
	"testing"
)

// çŸ¥è¯†ç‚¹ å˜é‡å£°æ˜
// æµ‹è¯•ä¸€ä¸ªç®€å•çš„ æ–æ³¢é‚£å¥‘ æ•°åˆ—
var a = 0 // å…¨å±€çš„

func TestFbi(t *testing.T) {
	// å£°æ˜å˜é‡
	// a := 1 å±€éƒ¨çš„
	b := 2

	for i := 0; i < 5; i++ {
		fmt.Println(" ", b)
		temp := a
		a = b
		b = temp + a
	}
}

func TestExchange(t *testing.T) {
	x := 1
	xx := 2

	x, xx = xx, x

	fmt.Println("---> äº¤æ¢äº†")
	t.Log(x)
	t.Log(xx)

}

```

### å…³äºå¸¸é‡å’ŒIota
çœ‹çœ‹å¸¸é‡ä½¿ç”¨ï¼Œä½ éœ€è¦ä½¿ç”¨const å£°æ˜å°±å¥½äº†

```go

package test

import "testing"

func TestXXX(t *testing.T) {
	t.Log("Testing")
}

//iota æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå®ƒä¼šåœ¨const å£°æ˜çš„åœ°æ–¹ +1 æ“ä½œ æ³¨æ„âš ï¸ _ ç¬¦å·æ˜¯çœç•¥

//ä¸‹é¢çš„æ˜¯ä¸€ä¸ªé¢è¯•é¢˜ é—®dæ˜¯ä»€ä¹ˆå€¼ dæ˜¯3
const (
    a = 1 + iota
    b
    _
    d
) 

// ä¾æ¬¡ä½¿ç”¨ ç´¯åŠ  +1
const (
	Monday = 1 + iota
	Tuesday
	Wednesday
)

// æˆ‘ä»¬ä½¿ç”¨ä½è¿ç®— æ¥åšåˆ¤æ–­
const (
	Readbale = 1 << iota
	Weitable
	Executable
)

func TestConstAdd(t *testing.T) {
	t.Log("Testing", Monday)
	t.Log("Tuesday", Tuesday)
}

// ä½¿ç”¨ä¸è¿ç®— å®ƒå¯ä»¥ éå¸¸å»ºè®®çš„è¡¨ç¤ºå››ç§ç±»å‹
func TestConstAdd2(t *testing.T) {
	testValue := 7 // 0011
	t.Log("Testing", testValue&Readbale)
	t.Log("Testing", testValue&Weitable)
	t.Log("Testing", testValue&Executable)
}


```



å…³äºç±»å‹çº¦æŸ

goçš„åŸºç¡€æ•°æ®ç±»å‹å¦‚ä¸‹å›¾æ‰€ç¤º,goä¸­æ˜¯åˆ†32/64çš„

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1651753688485-dab09460-b282-47b9-932a-36e5ede590b7.png)

**<font style="color:#E8323C;">ä¸å…è®¸å‡ºç° éšå¼ç±»å‹è½¬åŒ–</font>**

**<font style="color:#E8323C;"></font>**

### é¢„å®šä¹‰å€¼
```go
math.MaxInt64
math.MaxFloat64
math.MaxUint32
```



### å®šä¹‰è‡ªå·±çš„ç±»å‹å’Œå–å€
```go
package test

import "testing"

type MyInt int64

func TestImplicit(t *testing.T) {
	var a int32 = 1
	var b int64
	b = int64(a)

	var c MyInt
	c = MyInt(b)
	t.Log(a, b, c)
}

func TestPoint(t *testing.T) {
	a := 1
	aPter := &a // å–åœ°å€ç¬¦å·  è·å–açš„åœ°å€ å¼•ç”¨ï¼ˆä¸€èˆ¬æ¥è¯´åœ°å€æ˜¯16è¿›åˆ¶çš„ï¼‰
	t.Log(a, aPter) 
	t.Logf("%T %T", a, aPter)
}

func TestString(t *testing.T) {
	var s string
	t.Log("*" + s + "*")

	//	åˆ¤æ–­ç©ºsrtring å°±æ˜¯è·å–å®ƒçš„lengyh
	t.Log(len(s))
}

```



## è¿ç®—ç¬¦å’Œä»¥åŠæ¡ä»¶å’Œå¾ªç¯


ç®—æ•°è¿ç®—ç¬¦ ï¼ˆæ³¨æ„å“ˆ æˆ‘ä»¬æ²¡æœ‰å‰ç½®çš„++å’Œ--ï¼Œåªæœ‰åç½®++å’Œ--ï¼‰

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1651755145157-1caf0af5-1f74-4006-b466-a928b5014137.png)

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1651755164025-8da204f5-146d-4954-bb50-3ff95dab23f3.png)

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1651755391210-d6857595-c52a-4d84-85d8-bf3bfa526a2b.png)

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1651755394620-20bf6c52-491b-4ece-a932-e213ebec6343.png)



### æ¯”è¾ƒArray
æ¯”è¾ƒArrayå¦‚ä½•æ¯”è¾ƒï¼Ÿé»˜è®¤çš„æƒ…å†µä¸‹goæ˜¯å¯ä»¥è¿›è¡Œæ¯”è¾ƒçš„ï¼Œä½†æ˜¯å…¶ä»–çš„è¯­è¨€æ˜¯æ²¡æ³•æ¯”è¾ƒçš„ä»–ä»¬æ¯”è¾ƒçš„æ˜¯åœ°å€å¼•ç”¨

ï¼ˆå…ˆæ¯”è¾ƒé•¿åº¦å’Œç»´åº¦ å†æ¯”è¾ƒå€¼å†…å®¹ï¼‰

```go
package test

import "testing"

func TestOperatorArray(t *testing.T) {
	a := [...]int64{1, 2, 3, 4}
	b := [...]int64{1, 2, 3, 3}
	c := [...]int64{1, 2, 3, 2}
	d := [...]int64{1, 2, 3, 4}

	t.Log(a == b, c == d, a == d)
}
```



### æŒ‰ä½æ¸…é›¶è¿ç®—ç¬¦æ˜¯å•¥ï¼Ÿ
æŒ‰ä½æ¸…é›¶è¿ç®—ç¬¦æ˜¯å•¥ï¼Ÿå³è¾¹ä¸º1 çš„è¯ å·¦è¾¹æ— è®ºæ˜¯å•¥éƒ½æ˜¯0 ï¼Œå¦åˆ™ä¿ç•™å·¦è¾¹çš„æ•° &^

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1651755363840-3e825970-8be1-4a36-90a5-8d092234f4a8.png)

```go
package test

import "testing"

// è¿™ä¸ªä»£ç ä¸»è¦æµ‹è¯• ç‚¹å°± æ˜¯ æ›´æ”¹ ç¨‹åºçš„â€œå¯è¯» å¯å†™ å¯æ‰§è¡Œâ€çš„ä¾¿æ·æ›´æ”¹

func TestConstAdd3(t *testing.T) {
	const (
		Readbale = 1 << iota
		Weitable
		Executable
	)
	testValue := 7 // 0111
	// è®©å®ƒå˜æˆ ä¸å¯å†™
	testValue = testValue &^ Readbale
	// è®©å®ƒå˜æˆ ä¸å¯è¯»
	// testValue = testValue &^ Weitable
	// è®©å®ƒå˜æˆ ä¸å¯æ‰§è¡Œ
	testValue = testValue &^ Executable
	t.Log("Testing", testValue&Readbale == Readbale)
	t.Log("Testing", testValue&Weitable == Weitable)
	t.Log("Testing", testValue&Executable == Executable)
}
```



### åŸºç¡€å¾ªç¯ç»“æ„
```go
package test

import (
	"fmt"
	"testing"
)

func TestBaseFor(t *testing.T) {
	// ç®€å•çš„for
	for i := 0; i < 5; i++ {
		t.Log(i)
	}

	// whileå¾ªç¯
	a := 5
	for a < 5 {
		t.Log(a)
		a--
	}

}

```

### åŸºç¡€æ¡ä»¶è¯­å¥
```go

func TestIf(t *testing.T) {
	if v, err := someFunctiono(); err == nil {
		t.Log("æ²¡æœ‰å‡ºé”™", v)
	} else {
		t.Log("æœ‰å‡ºé”™", err)
	}
}

func someFunctiono() (sum int, err error) {
	a := 10
	fmt.Println(a)
	return a, nil
}

```

### å…³äºswitchçš„éªšæ“ä½œ
åœ¨ifçš„è¯­å¥ä¸­å¯ä»¥ å†™ä¸¤ç«¯ ç¬¬ä¸€ç«¯æ˜¯èµ‹å€¼ï¼Œç¬¬äºŒæ®µæ˜¯åˆ¤æ–­ ï¼ˆå‡ºç°è¿™ä¸ªçš„åŸå› ä¸»è¦æ˜¯goçš„functionå¯ä»¥æœ‰å¤šä¸ªè¿”å›å€¼ï¼‰

switchæ¡ä»¶ å¯ä»¥ä¸é™åˆ¶å¸¸é‡å’Œæ•´æ•°ä»¥åŠæ•°é‡ï¼Œé»˜è®¤ä¸éœ€è¦break ï¼Œgoæ˜¯è‡ªåŠ¨ç»™ä½ å¸¦çš„ï¼Œcaseå¯ä»¥æ”¾å…·ä½“çš„æ¡ä»¶è¡¨è¾¾å¼

```go

func TestSwitchMultiCase(t *testing.T) {
	for i := 0; i < 5; i++ {
		switch i {
		case 0, 2:
			t.Log("Even")
		case 1, 3:
			t.Log("Odd")
		default:
			t.Log("it is not 0-3")
		}
	}
}

func TestSwitchConditionCase(t *testing.T) {
	for i := 0; i < 5; i++ {
		switch {
		case i%2 == 0:
			t.Log("Even")
		case i%2 == 1:
			t.Log("Odd")
		default:
			t.Log("unknown")
		}
	}
}

```

## æ•°ç»„å’Œåˆ‡ç‰‡


### æ•°ç»„
1.å£°æ˜çš„å‡ ç§æ–¹å¼ï¼Œå¤šç»´ä¹Ÿæ˜¯ä¸€æ ·çš„

```go

func TestNeweggArray(t *testing.T) {
	// æˆ‘ä»¬å…·å¤‡å¦‚ä¸‹çš„å£°æ˜æ–¹å¼
	arr1 := [4]int{1, 2, 3, 4}
	arr2 := [...]int{1, 2, 3, 4, 5}
	arr1[1] = 0

	t.Log(arr1[1], arr1[2])
	t.Log(arr2)

}
```

2.å¦‚ä½•å»ä¾¿ åˆ©Array _æ˜¯ çœç•¥çš„æ„æ€

```go


func TestNeweggArrayOp(t *testing.T) {
	// æˆ‘ä»¬å…·å¤‡å¦‚ä¸‹çš„ æˆªå–å’Œä¾¿åˆ©å–å€¼ èµ‹å€¼ æ“ä½œ
	arr := [...]int{1, 3, 4, 5}

	// ç±»ä¼¼jsçš„ forEach éå† ï¼Œå¦‚æœä½ å¸Œæœ›çœç•¥ æŸå€¼ ï¼Œåªéœ€è¦æŠŠå®ƒå˜æˆ _ å°±å¯ä»¥äº†
	// for idx, e := range arr {
	for _, e := range arr {
		t.Log(e)
	}
}

```

3.Arrayçš„å¿«é€Ÿæˆªå– â€œå‰åŒ… åä¸åŒ…â€

```go


func TestNeweggArrayOp(t *testing.T) {
	// å¿«é€Ÿ çš„æˆªå–
	// a[å¼€å§‹çš„ç´¢å¼•ï¼ˆåŒ…å«ï¼‰, ç»“æŸç´¢å¼•ï¼ˆä¸åŒ…å«ï¼‰]
	a := [...]int{1, 2, 3, 4, 5}

	t.Log(a[1:2]) // 2
	t.Log(a[1:3]) // 2,3
	t.Log(a[1:])  // 2,3,4,5
	t.Log(a[1:])  // 2,3,4,5
	t.Log(a[:3])  // 1,2,3
}

```



### åˆ‡ç‰‡Slice æ˜¯ä»€ä¹ˆ
**<font style="color:#E8323C;">ä¸€å¥è¯ï¼šå¯å˜é•¿çš„arrayï¼Œå®ƒå…·çš„ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤º</font>**

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1651937782093-eaad7d9c-352f-4d1a-9c2f-7e9a7e6a90aa.png)

**<font style="color:#E8323C;">æŒ‡é’ˆæŒ‡å‘å†…å­˜ä¸­ä¸€ç‰‡è¿ç»­çš„å­˜å‚¨ç©ºé—´</font>**



1.å£°æ˜

```go
// å®é™…ä¸Š slice æ˜¯ä¸€ç§ç»“æ„ åŒ…å«äº† ä¸‰ä¸ªé‡è¦çš„ å±æ€§ 1ï¼Œåœ°å€ï¼Œ2. len  3, cap å®¹é‡
func TestSliceNew(t *testing.T) {
	t.Logf("TestSliceNewegg")
	// æˆ‘ä»¬çœ‹çœ‹å¦‚ä½• new ä¸€ä¸ªç®€å•çš„ slice , è®°ä½å®ƒæ˜¯ä¸€ä¸ª å¯å˜é•¿çš„ array
	var s0 []int
	t.Log(len(s0), cap(s0))

	// è¿½åŠ ä¸€ä¸ªå¦‚ä½•è¿½åŠ ï¼Œä¸ºä»€ä¹ˆéœ€è¦é‡æ–° å¯¹s0 å¤åˆ¶ä¸€éï¼Ÿ
	s0 = append(s0, 1)
	t.Log(len(s0), cap(s0))

	s1 := []int{1, 2, 3, 4}
	t.Log(len(s1), cap(s1))

	s2 := make([]int, 3, 5) // ä½¿ç”¨ make æ–¹æ³•åˆ›å»ºsliceå‚æ•° 1 æ˜¯ç±»å‹ ï¼Œå‚æ•°2æ˜¯len  ï¼Œå‚æ•°3æ˜¯å®¹é‡
	t.Log(len(s2), cap(s2))
	t.Log(s2[0], s2[1], s2[2]) // æ³¨æ„âš ï¸  ä¸èƒ½è®¿é—® len  ï¼Œå¤–çš„ å€¼ ä¼šæŠ¥é”™ï¼ï¼Œä¾‹å¦‚==> s2[4]

}


```

2.è§‚å¯Ÿä¸€ä¸‹å…¶capå®¹é‡çš„å¢é•¿è§„å¾‹



```go
// æˆ‘ä»¬çœ‹çœ‹ slice çš„ å®¹é‡çš„cap çš„å¢é•¿è§„å¾‹
func TestSliceNewLeng(t *testing.T) {
	s := []int{}

	for i := 0; i < 10; i++ {
		s = append(s, i)
		t.Log("--->", len(s), cap(s))
		// é€šè¿‡ å›¾ æˆ‘ä»¬å¯ä»¥çœ‹åˆ° cap çš„å¯å˜èŒƒå›´ éƒ½æ˜¯ * 2 çš„å¢é•¿çš„
	}
}
```

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1651939070224-52d2b76f-74d0-4f3c-9a61-4cd17bff2208.png)

3.ç”¨åˆ‡ç‰‡ å…±äº«çš„å­˜å‚¨ç»“æ„

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1651938481578-067bdfa1-cb8a-4f02-b48e-6d2d66b55ec5.png)

è¿™é‡Œéœ€è¦è¯´æ˜çš„months è¿™ä¸ª array å†å†…å­˜ä¸­æ˜¯å­˜åœ¨çš„ sliceQ2 å’Œ sumer å¦‚æœæŒ‡å‘ äº†è¿™ä¸ªArray é‚£ä¹ˆä»–ä»¬çš„ä¿®æ”¹ ä¼šç›´æ¥å½¼æ­¤äº’ç›¸å½±å“ï¼Œå› ä¸º æŒ‡é’ˆæŒ‡å‘çš„å¼•ç”¨æ²¡å˜

```go

func TestSlicShaerMemory(t *testing.T) {
	year := []string{"Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"}
	Q2 := year[3:6]
	t.Log(Q2, len(Q2), cap(Q2))

	sumer := year[5:8]
	t.Log(sumer, len(sumer), cap(sumer))

	// ç”¨äº æ˜¯å¼•ç”¨ å°†ä¼šå¯¼è‡´ å€¼çš„åŒæ­¥å˜æ›´
	sumer[0] = "unknown"
	t.Log(Q2, year)

}

```



**<font style="color:#E8323C;">æ€»ç»“Arry å’Œ slie å¯¹æ¯”äºŒè€…çš„åŒºåˆ«</font>**

- [x] array å®¹é‡ä¸å¯å˜ slice å¯ä»¥
- [x] array å¯ç›´æ¥æ¯”è¾ƒ slice ä¸å¯ä»¥



## Map
### åŸºç¡€çš„ä½¿ç”¨
```go
package test

import (
	"testing"
)

// å¦‚ä½•è¿›è¡Œå£°æ˜ï¼ˆcapä¸èƒ½ç”¨lenå¯ä»¥ä½¿ç”¨ï¼‰
func TestIniitMap(t *testing.T) {
	m1 := map[int]int{1: 1, 2: 4, 3: 9}
	t.Log(m1[2])
	t.Logf("len m1=%d", len(m1)) // f å¯ä»¥ç»„åˆæ¨¡æ¿å­—ç¬¦ä¸²

	m2 := map[int]int{}
	m2[4] = 16
	t.Logf("len m2=%d", len(m2))

	m3 := make(map[int]int, 10)
	t.Logf("len m3=%d", len(m3))
}

// è®¿é—®æœ‰ä¸€ä¸ªä¸å­˜åœ¨çš„å€¼ 0 å’Œ å€¼0ï¼Œæˆ‘ä»¬å¦‚è®¿é—®0 å€¼ å’Œä¸å­˜åœ¨å‘¢ï¼Ÿ
func TestAceessNotEXistingKey(t *testing.T) {
	m1 := map[int]int{}
	t.Log(m1[1])
	m1[2] = 0

	// æ³¨æ„å€¼ä¸å­˜åœ¨çš„æ—¶å€™æ˜¯ä¸€ä¸ª 0 ï¼Œkeyå­˜åœ¨value = 0 çš„æ—¶å€™ä¹Ÿæ˜¯o è¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦è¿™æ ·åˆ¤æ–­
	if _, ok := m1[3]; ok {
		t.Logf("key 3's value is %d", m1[3])
	} else {
		t.Log("key 3 is not existing")
	}
}

// å¦‚ä½•å»éå†ä¸€ä¸ªMap
func TestFoEatch(t *testing.T) {
	m1 := map[int]int{1: 1, 2: 4, 3: 9}
	for key, value := range m1 {
		t.Log(key, value)
	}
}

```



### è¿›é˜¶æ“ä½œ
```go
// å­˜å‚¨function


func TestMapFunC(t *testing.T) {
	m := map[int]func(op int) int{}
	m[1] = func(op int) int { return op }
	m[2] = func(op int) int { return op * op }
	m[3] = func(op int) int { return op * op * op }

	t.Log(m[1](2), m[2](2), m[3](2))
}

//æˆ‘ä»¬å¯ä»¥ä½¿ç”¨mapæ¥å®ç°set
func TestMapForSet(t *testing.T) {
	set := map[int]bool{}
	set[1] = true

	// hash å¯ä»¥è¿™æ ·å®ç°
	n := 1
	if set[n] {
		t.Log("å­˜åœ¨")
	} else {
		t.Log("ä¸å­˜åœ¨")
	}

    
	// deleteå¯ä»¥è¿™æ ·å®ç°
	delete(set, n)
	if set[n] {
		t.Log("å­˜åœ¨")
	} else {
		t.Log("ä¸å­˜åœ¨")
	}
}

```



## å­—ç¬¦ä¸²


### å…³äºå­—ç¬¦ä¸²çš„é‡è¦æ¦‚å¿µ
ç¬¬ä¸€ç‚¹æˆ‘ä»¬å…ˆæ¥èŠèŠUnicode å’Œbyte çš„é—®é¢˜

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1652273013400-04003d01-c2dc-44fe-820b-78c6559ce356.png)

æ³¨æ„ï¼šstring é›¶å€¼æ˜¯ä¸€ä¸ª 0 å“ˆï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œgoä¸­çš„æ•°æ®ç±»å‹åŸºæœ¬ä¸Šéƒ½æ˜¯é»˜è®¤å€¼å°±æ˜¯0

string çš„byteçš„ å­˜ä»»ä½•äºŒè¿›åˆ¶çš„æ•°æ®

stringæ˜¯ ä¸€ä¸ªä¸å¯å˜çš„byte slice

Unicode UTF8çš„åŒºåˆ«ï¼ŒUnicodeæ˜¯ç¼–ç è§„åˆ™ï¼ŒUTF8æ˜¯è¿™ç§ç¼–ç è§„åˆ™çš„å…·ä½“å®ç°ï¼Œruneå–Uncodeç¼–ç 

```go
func TestStringS(t *testing.T) {
	var s string

	t.Log(s) // åˆå§‹åŒ–é»˜è®¤å€¼ = 0
	s = "hello"
	t.Log(len(s)) // å¯¹äºè‹±è¯­æ¥è¯´ ä¸€ä¸ªå­—æ¯ç®—ä¸€ä¸ª
	// s[1] = "3" ä¸èƒ½è¿™æ ·å†™stringçš„æœ¬è´¨æ˜¯ä¸€ä¸ªä¸å¯å˜çš„ byte slice
	s = "\xE4\xB8\xA5" // å­˜ä»»ä½• äºŒè¿›åˆ¶çš„æ•°æ® è¿™ä¸ªäºŒè¿›åˆ¶ç¼–ç ä»£è¡¨ ä¸¥
	// s = "\xE4\xB8\xA5\xFF" // å­˜ä»»ä½• äºŒè¿›åˆ¶çš„æ•°æ® è¿™ä¸ªæ˜¯ä¸€ä¸ªä¹±ç 
	t.Log(s)
	t.Log(len((s)))

	s = "ä¸­"
	t.Log(len((s))) // è·å–çš„æ˜¯byteæ•°

	c := []rune(s)               // rune slice è¡¨ç¤ºçš„æ˜¯unicode slice
	t.Logf("ä¸­ unicode %x", c[0]) // ä½¿ç”¨16 è¿›ä½åˆ¶ å»è·å– 0ä½ç½®ä¸Šçš„ unicodeç¼–ç 
	t.Logf("ä¸­ UTF %x", s)        // ä½¿ç”¨16 è¿›ä½åˆ¶ å»è·å– s
}

```

### å…³äºå­—ç¬¦ä¸²çš„å¸¸ç”¨æ–¹æ³•å’Œä¸€äº›åº“
![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1652281689524-34a3d81d-e944-4110-9bcb-33dc3cc2fe09.png)

```go

func TestStringFN(t *testing.T) {
	s := "A,B,C"
	parts := strings.Split(s, ",")
	t.Log(parts)

	for _, part := range parts {
		t.Log(part) // éå† string
	}
	t.Log(strings.Join(parts, "-")) // ç»„åˆ
}
```

