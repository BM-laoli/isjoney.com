---
title: "iOS App å¼€å‘æŒ‡å—ï¼šç”Ÿå‘½å‘¨æœŸã€ç»„ä»¶åŒ–ä¸SDKé›†æˆ"
date: "2024-12-19"
summary: "æ·±å…¥è®²è§£iOS Appç”Ÿå‘½å‘¨æœŸç®¡ç†ã€å¯åŠ¨ä¼˜åŒ–ã€ç»„ä»¶åŒ–é€šä¿¡æ–¹æ¡ˆã€ç¬¬ä¸‰æ–¹SDKé›†æˆï¼ˆå¦‚QQç™»å½•ï¼‰ã€æ—¥å¿—é‡‡é›†ä¸å´©æºƒä¸ŠæŠ¥ç­‰æ ¸å¿ƒæŠ€æœ¯ã€‚"
status: "completed"
tech: ["iOS", "AppLifecycle", "Componentization", "SDK"]
github: "https://github.com/BM-laoli"
arxiv: ""
keyId: "App"
---

> ä»æœ¬ç« å¼€å§‹ æˆ‘ä»¬å°†ä¼šæ¥è§¦é«˜çº§å†…å®¹
>



# Appç”Ÿå‘½å‘¨æœŸ
## ç†è®ºçŸ¥è¯†
![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1641558780015-c5fad6cc-181d-472b-b73c-f5a5827cd3c0.png)

> å®é™…ä¸Š å°±æ‹¿åˆ° UIAplicationè¿™ä¸ªå¯¹è±¡ï¼Œå®ƒå…·å¤‡ä¸‹é¢çš„åŠŸèƒ½ğŸ‘‡ï¼ŒAppçš„å¯åŠ¨æµç¨‹ä¹Ÿåœ¨ä¸‹é¢ç»™å‡ºäº†ï¼Œå¯¹äºRNæ¥è¯´ä¸­é—´è¿˜éœ€è¦åŠ ä¸€å±‚yogoå’Œjscoreçº¿ç¨‹ ï¼Œæˆ‘ä»¬ç°åœ¨çš„å¯åŠ¨ä¼˜åŒ– ä¹Ÿæ˜¯å¯ä»¥åœ¨è¿™ä¸ªæµç¨‹ä¸­å»åš
>

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1641559024990-f6e4cd04-93ee-4778-8ae6-4e4ab4e1cb28.png)



![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1641559300938-99bd8ab6-f0df-48c5-9d02-1bb78e19f894.png)

ä¸Šé¢è¿™ä¸ªå›¾ä¸­ ç¬¬ä¸€ä¸ªå‡½æ•° æ˜¯ å‰æœŸå‡†å¤‡ï¼Œç¬¬äºŒä¸ª æˆ‘ä»¬çš„åˆå§‹åŒ–æ“ä½œï¼ˆæ ¸å¿ƒæ“ä½œå°±æ˜¯åœ¨è¿™é‡Œ-ä»£ç é‡Œçœ‹å¾—åˆ°çš„å¯åŠ¨ä¹‹åçš„æ“ä½œï¼‰æ•°æ®çš„ä¸ŠæŠ¥å¯ä»¥ä¸¢åˆ°kill appä¸­å»åšä¸ŠæŠ¥ 



## å®è·µæŒ‡å—Appå¯åŠ¨å›¾ï¼ˆé—ªå±ï¼‰
éœ€æ±‚å¦‚ä¸‹ï¼šå¹¿å‘Šä¹Ÿåœ¨è¿™é‡Œå‡ºç° å“ˆ- å…ˆä¸€å¼ å›¾ï¼Œå†ä¸€å¼ å¹¿å‘Šå›¾ï¼Œï¼ˆä¸šç•Œä¸»æµçš„æ–¹æ¡ˆï¼‰

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1641559813648-135afb9d-9768-40e7-8461-e222682bf2eb.png)

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1641560007305-05ce8b10-2c98-47a3-8f0b-605bc503c30f.png)



1. æ¸…ç†æ‰åŸæ¥çš„é—ªå±

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1641560330356-e907102d-5942-4d15-ba4c-66915adbc285.png)

è¿™ä¸ªé‡Œé¢çš„ç›¸å…³çš„ä¸œè¥¿åˆ é™¤å°±å¥½äº†

2. æ·»åŠ ä¸€å¼ 

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1641560424755-a264276b-4c13-43b1-a14d-c2f2c08cf2ad.png)

å®é™…ä¸Šä¸æ˜¯åœ¨è¿™é‡Œé¢æ·»åŠ  ä½ éœ€è¦æŠŠè¿™ä¸ªé‡ç½®ä¸ºç©ºï¼Œç¬¬äºŒæ­¥çš„æ—¶å€™ç‚¹å‡»åœ¨fileä¸­æ˜¾ç¤ºï¼Œç„¶åæŠŠæˆ‘çš„githubçš„ä¸Šçš„ä¸œè¥¿æ‹¿ä¸‹æ¥å°±ä¸¢è¿›å»ï¼Œç„¶åä½ åº”è¯¥èƒ½çœ‹åˆ° å›¾ç‰‡äº†ï¼Œåå­—ä½ å¯ä»¥è‡ªå·±æ”¹ä½ å–œæ¬¢çš„åå­—



![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1641563086052-d9354515-da55-47ee-b6a6-660f2a1294f4.png)

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1641563190213-50f0f5d9-bdf2-4acf-b7a8-692786a9cf35.png)



ä¸»è¦å•Šï¼Œä½ è¿˜éœ€è¦å»åšä¸€ä»¶äº‹æƒ…ï¼Œå°±æ˜¯13 ä¹‹åçš„iosæ²¡æœ‰ç›´æ¥æŒ‡å®šçš„imglaunchäº†ï¼Œä½ éœ€è¦è¿™æ ·æ¥åšï¼Œåœ¨æ¯ä¸€ä¸ªproject è¿˜æ˜¯targetä¸‹éƒ½æŠŠ Limg æ”¹æˆä½ è‡ªå·±æ‹–è¿‡æ¥çš„åå­—å“ˆ

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1641563289063-a5a186d4-07e2-4582-97f6-aa046a8180de.png)

è¿™æ ·å°±å®Œäº†ï¼Ÿæƒ³å±åƒï¼Œä½ å¯èƒ½è¿˜ä¼šé‡åˆ°å¯åŠ¨é»‘å±å¹•çš„æƒ…å†µä½ éœ€è¦è¿™æ ·å¤„ç†

1.é¦–å…ˆæˆ‘ä»¬å»åˆ°info.plistï¼Œåˆ æ‰å¦‚ä¸‹å›¾ç®­å¤´æ‰€ç¤º

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1641563419839-91ceef45-5d5b-41c2-8abd-dc73b1e4b4ef.png)



2.é¡¹ç›®ç›®å½•ï¼Œåˆ æ‰Scenedelegate.hå’ŒScenedelegate.mè¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚



3.å’±ä»¬å†è¿›å…¥APPdelegate.m,æ³¨é‡Šæˆ–è€…åˆ æ‰å›¾ç¤ºé‡Œé¢å†…å®¹

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1641563447240-56d92a64-d391-4f38-bded-a67e09b525e9.png)

4.æœ€åä¸€æ­¥ï¼Œåˆ«å¿˜äº†åœ¨APPdelegate.hé‡Œé¢æ·»åŠ windowå±æ€§

@property (strong, nonatomic) UIWindow * window;



5.å¤§åŠŸå‘Šæˆ

è‡³äºä¸ºä»€ä¹ˆ æœ‰è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å®˜æ–¹çš„è§£é‡Šï¼ˆæ¶å¿ƒäºº ğŸ˜‚ [å®˜æ–¹](In iOS 13 and later, use UISceneDelegate objects to respond to life-cycle events in a scene-based app.)ï¼‰ï¼š

iOS13çš„ç”Ÿå‘½å‘¨æœŸå‘ç”Ÿäº†æ”¹åŠ¨,å¤§å®¶éƒ½çŸ¥é“,åº”ç”¨ç”Ÿå‘½å‘¨æœŸè¿™ä¸ªä¸œè¥¿,ä¸€ç›´åˆ°ç›®å‰çš„iOS 12è¿™ä¸ªç‰ˆæœ¬éƒ½æ˜¯åœ¨AppDelegateé‡Œå¤´(ä¹Ÿå°±æ˜¯UIApplicationDelegateé‡Œé¢)ï¼Œä½†æ˜¯ios13ç‰ˆæœ¬åŒ…æ‹¬ä¹‹åï¼ŒAppDelegate(UIApplicationDelegate)æ§åˆ¶ç”Ÿå‘½å‘¨æœŸçš„è¡Œä¸ºäº¤ç»™äº†SceneDelegate(UIWindowSceneDelegate)



> å¥½äº†æœ‰ç‚¹æ„æ€äº†è§£å†³ä¸Šé¢çš„é—®é¢˜äº†ï¼Œæˆ‘ä»¬æ¥çœ‹å¦‚ä½•åš å¹¿å‘Šå›¾å‘¢ï¼Ÿ
>

// ä¸»è¦æœ‰ä¸¤ç±»æ–¹å¼è®©å®ƒæ¶ˆå¤± ï¼Œä¸€ä¸ªæ˜¯è¦†ç›–ï¼Œå¦ä¸€ä¸ªå¤šwindow



```javascript
# æ–°å»ºä¸€ä¸ªUIImageView 
//
//  UIGGImg.m
//  SimpelApp
//
//  Created by æä»•å¢ on 2022/1/7.
//

#import "UIGGImg.h"
#import "GTScreen.h"

@interface UIGGImg()
@property(nonatomic, strong, readwrite) UIButton *button;
@end

@implementation UIGGImg

-(instancetype) initWithFrame:(CGRect) frame {
    self = [super initWithFrame:frame];
    
    if(self){
        self.image = [UIImage imageNamed:@"icon.bundle/Spla.png"];
        
        [self addSubview:({
            _button = [[UIButton alloc] initWithFrame:UIRect(330, 77, 60, 40)];
//            è®¾ç½®ç‚¹å‡»äº‹ä»¶
            _button.backgroundColor = [UIColor lightGrayColor];
            [_button setTitle:@"è·³è¿‡" forState:UIControlStateNormal];
            [_button addTarget:self action: @selector(_handlePalyEnd) forControlEvents:UIControlEventTouchUpInside];
            _button;
            // IUImgeèƒ½å“åº”ç‚¹å‡»
        })];
        self.userInteractionEnabled = YES;
        
    };
    return self;
};
- (void)_handlePalyEnd {
    [self removeFromSuperview];
}

@end

# ç„¶å å» AppDelegate  didFinishLaunchingWithOptions å‡½æ•°ä¸­æ·»åŠ é€»è¾‘
   +++++
    self.window.rootViewController = navigationController;
    [self.window makeKeyAndVisible];
    //   ç³»ç»Ÿé¦–å±æ¶ˆå¤±ä¹‹å
        [self.window addSubview:({
            UIGGImg *GGVIew = [[UIGGImg alloc] initWithFrame:self.window.bounds];
            GGVIew;
        })];
        
    return YES;

```



# å¦‚ä½•å”¤èµ·å…¶ä»–App åè®®
## ç³»ç»Ÿæä¾›çš„
![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1641566842342-e5963d8e-17df-4094-8337-d7b91342a571.png)

1. é¦–å…ˆå»appé…ç½®æ–‡ä»¶å¤¹ä¸­æ·»åŠ  type å®ƒæ˜¯ç³»ç»Ÿçº§åˆ«çš„ï¼Œåªéœ€è¦ æ³¨å†Œ å°±å¥½äº†

æ¯”å¦‚æˆ‘ä»¬å¸Œæœ› æµè§ˆå™¨ è¾“å…¥ä¸€äº›ä¸œè¥¿ï¼Œæµè§ˆå™¨å°±èƒ½æ‰“å¼€æˆ‘è¿™ä¸ªappï¼Œä½†æ˜¯å¼Šç«¯å°±æ˜¯ å®¹æ˜“é‡å

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1641567204235-ca8db8dd-76c6-418b-8be6-5c576e239f80.png)

å¯¹äºå¦‚ä½•æºå¸¦å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥å®ç°

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1641567269861-9875d33f-34e0-47af-91c6-4e92e088ac85.png)

æˆ‘ä»¬ä¸‹é¢ğŸ‘‡æ¥çœ‹çœ‹å¦‚ä½•æ¥å— å‚æ•°ï¼Œä½¿ç”¨è¿™ä¸ªæˆ‘ä»¬è¿˜å¯ä»¥é˜²å¾¡ä¸€äº›æ”»å‡» æ¯”å¦‚optioné‡Œçš„form ä¸‹é¢å°±æ˜¯å†™ä»£ç äº†



```javascript
# AppDelegate

#pragma mark -
- (BOOL)application:(UIApplication *)app openURL:(NSURL *)url options:(NSDictionary<UIApplicationOpenURLOptionsKey,id> *)options {
return  YES;
};
```

è¿™å°±æ˜¯ ç³»ç»Ÿæä¾›çš„æ–¹æ¡ˆï¼Œå¾ˆç®€å•ï¼ŒåŸºäºè¿™äº›æˆ‘ä»¬å°±èƒ½å¹²å¾ˆå¤šäº‹æƒ…ï¼Œæ¯”å¦‚æ‰“å¼€æŸä¸€ä¸ªåº•å±‚é¡µ



å¥½çš„ä¸Šé¢æ˜¯å¦‚ä½• è°ƒèµ·æˆ‘ä»¬çš„Appï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è°ƒç”¨å…¶ä»–appï¼Ÿ

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1641568002205-6e2dcdf7-8e35-43d5-9988-d4d5fc447352.png)

```objectivec
- (void) myButtonClick {
//  åŠ è¿™æ®µåˆ¤æ–­çš„åŸå› æ˜¯ï¼šæˆ‘ä»¬çš„è‡ªå®šä¹‰çš„Delegateæ˜¯éå¿…é€‰çš„ï¼Œä¸ºäº†é¿å…æŠ¥é”™éœ€è¦è¿™æ ·æ¥å…œåº•å¤„ç†
    if(self.delegate && [self.delegate respondsToSelector:@selector(tabViewCell:clickDeleteButton:)]  ) {
//        [self.delegate tabViewCell:self clickDeleteButton:self.myButton];
        
        // è¿™ä¸ªæ˜¯æ‰“å¼€
        NSURL *urlSchem = [NSURL URLWithString:@"TestApp://img77"];
//        [[UIApplication sharedApplication] openURL:urlSchem options:nil completionHandler:^(BOOL success) {
//                NSLog(@"");
//            }];
        // è¿™ä¸ªæ˜¯ ç³»ç»Ÿæä¾›çš„canOpneä¹Ÿèƒ½åšä¸šåŠ¡é€»è¾‘ æ¯”å¦‚ç”¨æˆ·æ²¡æœ‰å®‰è£…æ­¤appçš„æ—¶å€™åšäº›ä»€ä¹ˆæ“ä½œã€‚ æ³¨æ„âš ï¸ æˆ‘ä»¬éœ€è¦å†™ä¸€ä¸ªç™½åå•ï¼è¦ä¸ç„¶ æ˜¯åˆ¤æ–­ä¸å‡ºæ¥çš„ è¿™ä¸ªå‡½æ•°ï¼
        BOOL canopne = [[UIApplication sharedApplication] canOpenURL:urlSchem];
        
    }
}
```

## å¦ä¸€ç§æ–¹å¼ UniversalLink 
> IOS9 ä¹‹åå¼€å§‹æ”¯æŒçš„ 
>

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1641569613663-d88020c1-f0c1-4eae-8dc4-fcdfa41609eb.png)

åˆèƒ½æ‰“å¼€App åˆèƒ½æ‰“å¼€H5 ï¼Œè¿™ä¸ªå°±æ˜¯AppStoreä¸­çš„ è½åœ°é¡µ

å¦‚æœè¦å®ç°ï¼Œéœ€è¦ä¸‰æ–¹é¢ ã€Appéœ€è¦å¼€å¯ï¼Œè¯ä¹¦éœ€è¦é…ç½® Webé¡µé¢ä¹Ÿéœ€è¦é…ç½®ã€‘

ä¹Ÿå°±æ˜¯è¯´ ä»– å°±æ˜¯ä¸€ä¸ªé“¾æ¥ï¼Œh5æ‰“å¼€çš„è¯å°±æœ‰ä¸€ä¸ª å¤´éƒ¨ï¼ˆæ‰“å¼€Appæ ‡æ—¶ï¼‰ï¼Œå…¶ä»–Appå†…æ‰“å¼€è¿™ä¸ªç½‘å€çš„è¯å°±ä¼šå”¤èµ·ä½ è¿™ä¸ªApp



ä½†æ˜¯è…¾è®¯çš„Appçš„ä¸€ä¸ª ä¼˜ç§€ä¹ æƒ¯ å°±è¯´æŠŠ è‡ªå·±å®¶çš„app æŠŠè¿™ä¸ªåŠŸèƒ½ç¦æ­¢æ‰ï¼Œå› ä¸ºä¼šé€ æˆç”¨æˆ·æµå¤±ï¼Œæ‰€ä»¥åªä¼šç»™ä½ æ‰“å¼€å†…åµŒçš„webView ä¸ä¼šç»™ä½ è·³H5



# IOS å¼€å‘ä¸­çš„ç»„ä»¶åŒ–


## ç»„ä»¶åº“
### ç†è®ºåŸºç¡€
![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1641994450229-276c05c9-ef65-46b1-9550-edec86041a2c.png)

> å…¶ä¸­ä¸»è¦çš„å®ç°æ–¹å¼å°±æ˜¯ ç»„ä»¶åŒ–ï¼ŒæŠŠæ¯ä¸€ä¸ªUIéƒ½åˆ†å‰²æˆä¸åŒçš„ç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå¦‚æœè¦åšç‹¬ç«‹ï¼Œé‚£ä¹ˆå°±å›æ¶‰åŠåˆ°é€šä¿¡çš„é—®é¢˜ï¼Œå¦‚ä½•é€šä¿¡å’Œæ²»ç†é€šä¿¡ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬éœ€è¦æ€è€ƒçš„ğŸ¤”
>

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1641997098204-40fc3665-c0c3-4b5b-814b-7c233c183e06.png)

> å®é™…ä¸Šæ–¹æ¡ˆ1  å°±æ˜¯ä½¿ç”¨ä¸€ä¸ªä¸­é—´ä»¶ åšä¸¤ä¸ªç»„ä»¶çš„é€šä¿¡ï¼Œ
>



### ä»£ç å®è·µ
> æ³¨æ„è¿™é‡Œçš„ä»£ç äº‹ä»¶ ä¸»è¦æ˜¯åšç»„ä»¶åŒ–çš„é€šä¿¡æ–¹æ¡ˆï¼Œç”±äºä¹‹å‰çš„ä»£ç å‡ºé—®é¢˜äº†ï¼Œç°åœ¨æˆ‘ä»¬ä»¥è€å¸ˆçš„codeä¸ºå‡†. åœ¨ä»£ç å®è·µä¸­ æˆ‘ä»¬ç”¨äº†ä¸¤ä¸ªä¸»è¦çš„class
>

```objectivec
# æˆ‘ä»¬å…ˆæ¥çœ‹ä¸­é—´ä»¶ï¼ˆå®é™…ä¸Šä¸‰ç§é€šä¿¡æ–¹å¼ éƒ½æ˜¯æŒ‚åˆ°äº†ä¸€ä¸ªä¸ç›¸å…³çš„classä¸­é—´ä»¶ä¸Šçš„ï¼‰

//
//  GTMediator.h
//  SampleApp
//
//  Created by dequanzhu on 2019.
//  Copyright Â© 2019 dequanzhu. All rights reserved.
//

#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>

//å¸¸ç”¨çš„ä¸‰ç§ç»„ä»¶åŒ–æ–¹æ¡ˆ

NS_ASSUME_NONNULL_BEGIN

@protocol GTDetailViewControllerProtocol <NSObject>

- (__kindof UIViewController *)detailViewControllerWithUrl:(NSString *)detailUrl;

@end

@interface GTMediator : NSObject

//target action
+ (__kindof UIViewController *)detailViewControllerWithUrl:(NSString *)detailUrl;

//url scheme
typedef void(^GTMediatorProcessBlock)(NSDictionary *params);
+ (void)registerScheme:(NSString *)scheme processBlock:(GTMediatorProcessBlock)processBlock;
+ (void)openUrl:(NSString *)url params:(NSDictionary *)params;

//protol class
+ (void)registerProtol:(Protocol *)proto class:(Class)cls;
+ (Class)classForProtocol:(Protocol *)proto;

@end

NS_ASSUME_NONNULL_END



//
//  GTMediator.m
//  SampleApp
//
//  Created by dequanzhu on 2019.
//  Copyright Â© 2019 dequanzhu. All rights reserved.
//

#import "GTMediator.h"

@implementation GTMediator

+ (__kindof UIViewController *)detailViewControllerWithUrl:(NSString *)detailUrl{
    
    Class detailCls = NSClassFromString(@"GTDetailViewController");
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Warc-performSelector-leaks"
    UIViewController *controller = [[detailCls alloc] performSelector:NSSelectorFromString(@"initWithUrlString:") withObject:detailUrl];
#pragma clang diagnostic pop
    return controller;
}

#pragma mark -
+ (NSMutableDictionary *)mediatorCache{
    static NSMutableDictionary *cache;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        cache = @{}.mutableCopy;
    });
    return cache;
}

+ (void)registerScheme:(NSString *)scheme processBlock:(GTMediatorProcessBlock)processBlock{
    if (scheme && processBlock) {
        [[[self class] mediatorCache] setObject:processBlock forKey:scheme];
    }
}

+ (void)openUrl:(NSString *)url params:(NSDictionary *)params{
    GTMediatorProcessBlock block = [[[self class] mediatorCache] objectForKey:url];
    if (block) {
        block(params);
    }
}

// è¿™ä¸ªæ˜¯å¦ä¸€ç§ ç»„ä»¶åŒ–çš„é€šä¿¡æ–¹å¼
+ (void)registerProtol:(Protocol *)proto class:(Class)cls{
    if (proto && cls) {
        [[[self class] mediatorCache] setObject:cls forKey:NSStringFromProtocol(proto)];
    }
}

+ (Class)classForProtocol:(Protocol *)proto{
    return [[[self class] mediatorCache] objectForKey:NSStringFromProtocol(proto)];
}

@end


# å¦‚ä½•æ˜¯ä½¿ç”¨ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ ä¸¤ä¸ªè¦è¿›è¡Œé€šä¿¡çš„ç»„ä»¶
// newsContallä¸‹çš„utilsä¸‹/  GTNewsViewController.m
# ç»„ä»¶1ï¼šcontaoller
++++
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    GTListItem *item = [self.dataArray objectAtIndex:indexPath.row];
    
//ç»„ä»¶åŒ–ä¸‰ç§æ–¹æ¡ˆè®²è§£  å»ºè®®ä¸‰ç§ä¸€èµ·ä½¿ç”¨ æ²¡æœ‰ä¸€ä¸ªæ˜¯èƒ½å®Œå…¨è§£å†³ ä¸”é€šç”¨çš„
// Target-Action
//    __kindof UIViewController *detailController = [GTMediator detailViewControllerWithUrl:item.articleUrl];

// URL Scheme
//    [self.navigationController pushViewController:detailController animated:YES];
//    [GTMediator openUrl:@"detail" params:@{@"url":item.articleUrl,@"controller":self.navigationController}];
    
// Protocal-Class
    Class cls = [GTMediator classForProtocol:@protocol(GTDetailViewControllerProtocol)];

    [self.navigationController pushViewController:[[cls allonoc] detailViewControllerWithUrl:item.articleUrl] animated:YES];
     [self.navigationBarC]
    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:item.uniqueKey];
}
++++
  
# ç»„ä»¶2ï¼šå°†è¦è°ƒæ•´åˆ°çš„UIView
#  GTDetailViewController
  + (void)load {
    [GTMediator registerScheme:@"detail://" processBlock:^(NSDictionary * _Nonnull params) {
        NSString *url = (NSString *)[params objectForKey:@"url"];
        UINavigationController *navigationController = (UINavigationController *)[params objectForKey:@"controller"];
        GTDetailViewController *controller = [[GTDetailViewController alloc] initWithUrlString:url];
//        controller.title = [NSString stringWithFormat:@"%@", @(indexPath.row)];
        [navigationController pushViewController:controller animated:YES];
    }];
    
    [GTMediator registerProtol:@protocol(GTDetailViewControllerProtocol) class:[self class]];
}

```

# ä¸‰æ–¹SDK-å®ç°ç®€å•çš„ç™»å½•åŠŸèƒ½
## ç†è®ºçŸ¥è¯†
> ä¸»è¦æ˜¯ å·©å›ºURL Schemçš„æ–¹å¼å®ç°SSO ï¼ˆå®ç°ç¬¬ä¸‰æ–¹çš„ç™»å½•ï¼‰é™æ€åº“  åŠ¨æ€åº“ è´¦æˆ·ä½“ç³» ä»¥ä¸‹çš„ä¸œè¥¿å°±æ˜¯ä½ å°†è¦å­¦ä¹ çš„
>

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642082208697-f7f6c24e-da08-451a-aaae-5289deb9f17c.png)



![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642082342309-90486f4f-ae46-4fe0-8939-5c131041538d.png)

    æœ‰æ—¶å€™æˆ‘ä»¬ä½¿ç”¨åˆ«äººçš„ä¸œè¥¿ï¼Œåˆ«äººä¸å›ç»™ä½ æºä»£ç ï¼Œåˆ«äººç»™ä½ çš„ ç¼–è¯‘å¥½çš„ä¸œè¥¿ï¼Œåœ¨IOSä¸­è¿™å°±æ˜¯ åº“ ï¼Œç„¶åIOSä¸­è¿˜åšäº†åˆ†ç±»j é™æ€/åŠ¨æ€ ï¼Œé™æ€çš„é—®é¢˜ä¸Šé¢ä¹Ÿè¯´äº†ï¼Œç¼–è¯‘çš„æ—¶å€™è¦æŠŠå¥½å¤šä¸œè¥¿cvè¿›ç¼–è¯‘æ‰§è¡Œ/ æ˜¯å™ä¸€ä¸ªé™æ€åº“ï¼ŒåŠ¨æ€åº“å°±æ˜¯ runtimeçš„ï¼ŒåŠ¨æ€åº“ æ˜¯æœ‰é£é™©çš„ï¼ŒåŒ…æ‹¬å®¡æ ¸ä»€ä¹ˆçš„ï¼Œä½†æ˜¯å¼€å‘çš„æ—¶å€™ æˆ‘ä»¬ä¸ºäº†å®‰å…¨æ˜¯ä¸å›ä½¿ç”¨åŠ¨æ€åº“çš„ï¼Œæˆ‘ä»¬ç›´æ¥å°±æ˜¯é™æ€åº“æ‰“åŒ…åˆ°appä¸­ï¼Œä½†æ˜¯ç³»ç»Ÿçš„UIKitå°±æ˜¯é™æ€åº“ï¼Œå¯ä»¥åšä¸€éƒ¨åˆ†çš„ä¼˜åŒ–ã€‚

## å®è·µï¼šåˆ›å»ºé™æ€åº“
![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642082659218-c31b5663-1a11-43c7-988e-506968a4b0b5.png)

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642082720907-dabf6214-0917-41ce-9aa6-122a72b5f925.png)

 

å¦‚æœè¦é›†æˆçš„è¯ï¼Œç›´æ¥æ‹–è¿›å»å°±å¥½äº†

å®‰è£…ä¸Šè¿°æ­¥éª¤ ï¼Œbuild ä¸‹ï¼Œé™æ€.a æ–‡ä»¶å°±å‡ºæ¥ï¼Œè¿™ä¸ªå°±æ˜¯è¦ç”¨åˆ°çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ç„¶åç‚¹å‡»CopyLikn æŠŠéœ€è¦ä¸ºh å¤´æ–‡ä»¶ æš´éœ²å‡ºå»

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642082946945-9106d86d-26da-4e67-adc4-78c1094b822b.png)

ç„¶åshow File æ‰¾åˆ°ä¸Procutsæ–‡ä»¶å¤¹ğŸ“ æŠŠéœ€è¦çš„ä¸œè¥¿æå‡ºæ¥ï¼Œæ¯”å¦‚ä¸‹é¢æˆ‘ç”¨åˆ°äº†ä¸¤ä¸ªå¤´æ–‡ä»¶å’Œä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642083062377-4549a93a-eae5-4d51-9ff8-f9ecf46331aa.png)



åœ¨é¡¹ç›®ä¸­å¦‚æœè¦åº”ç”¨å°±è¿™æ ·æ¥æ“ä½œ

1. ä¸ºäº†ç®¡ç†æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªGlup
2. ç›´æ¥æ‰“å¼€file ç„¶å æŠŠbuildçš„ä¸‰ä¸ªä¸œè¥¿ ä¸¢è¿›å»ï¼Œ
3. æ³¨æ„ ä¸Šè¿°æ“ä½œä¹‹åxcode ä¸å›è¯†åˆ« ä½ éœ€è¦å†ç‚¹å‡»ä¸€ä¸‹ ç„¶åé€‰ä¸­ å†saveiä¸‹ è¿™æ ·ä½ çš„é™æ€åº“å°±å¯ä»¥è¿›æ¥äº† 

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642083257602-d6e7859a-30d1-414f-8ab5-ff3de271391f.png) ä½¿ç”¨çš„è¯ä½ å°± ç›´æ¥#import å°±å¥½äº† ![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642083339027-74d28455-d38b-4722-b535-4f458fd9850d.png) å¦‚æœèƒ½run å°±è¡¨ç¤ºå·²ç» linkå¥½äº† å¾ˆå®Œç¾å“ˆï¼

ä½†æ˜¯éœ€è¦æ³¨æ„ï¼æˆ‘ä»¬ç”Ÿäº§build åº“çš„æ—¶å€™ä¸èƒ½åªé€‰æ¨¡æ‹Ÿå™¨çš„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è¿æ¥ä¸Šæ‰‹æœº å†buiild ä¸€ä¸ªçœŸæœºçš„åº“ ï¼Œç„¶åæŠŠå®ƒä»¬åˆå¹¶åœ¨ä¸€èµ·æ‰è¡Œã€‚å› ä¸ºæ¨¡æ‹Ÿå™¨çš„æ¶æ„ å’Œ çœŸæœºæ¶æ„ä¸Šä¸ä¸€æ ·çš„ã€‚ä½†æ‰“åŒ…çš„æ—¶å€™åªéœ€è¦ çœŸæœºçš„åŒ…å°±å¥½äº†ã€‚å¦‚ä½•åˆå¹¶å‘¢ï¼Ÿå®é™…ä¸Šå°±æ˜¯ä¸Šé¢çš„å‘½è¡Œï¼Œèµ°ä¸€ä¸‹å°±å¥½äº†



## å®è·µï¼šåŠ¨æ€åº“æ˜¯å¦‚ä½•åˆ¶ä½œå’Œä½¿ç”¨çš„ï¼Ÿ
å¦‚ä½•åˆ›å»ºï¼Ÿ

1. é€‰æ‹©formawrok é€‰é¡¹
2. å®Œæˆä¹‹åxcodeæ‰“å¼€ ï¼Œå‘ç°productä¸‹ å¾—åˆ°äº†.framwork æ–‡ä»¶å¤¹ï¼Œè€Œä¸æ˜¯ .a äºŒè¿›åˆ¶æ–‡ä»¶ ã€‚
3. åœ¨è¿™ä¸ªé¡¹ç›®ä¸‹æ–°å¢æ–‡ä»¶ æˆ–è€…ä¸šåŠ¡é€»è¾‘ä¹‹åï¼Œåªéœ€è¦åœ¨buildPhase ä¸­æ‰¾åˆ° Headers  æŠŠä½ éœ€è¦çš„,h å¤´æ–‡ä»¶åŠ åˆ°Publikcä¸‹å°±å¥½äº†ï¼Œè¿™æ ·å¤–éƒ¨å°±èƒ½ä½¿ç”¨ ä½ è¿™ä¸ªframwrokäº†ï¼Œé»˜è®¤åˆ›å»ºçš„æ—¶å€™å† Projectä¸‹æ‰€ä»¥ä½ éœ€è¦å¼„åˆ°publicä¸‹
4. å†æ‰§è¡ŒBUIIL å†çœ‹framworkæ–‡ä»¶å¤¹ä¸‹çš„Headrs æ–‡ä»¶å¤¹ä¸‹ å°±æœ‰ä½ çš„,h å¤´æ–‡ä»¶äº†



å¦‚ä½•ä½¿ç”¨ï¼Ÿ

1. æ•´ä¸ªæ–‡ä»¶å¤¹æ‹–åˆ°é¡¹ç›®ä¸­
2. å†xcodeä¸­addä¸€ä¸‹ 
3. ç„¶å éœ€è¦åœ¨![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642084191625-8d88920d-dd7f-4928-9aa5-6f9917233997.png) è¿™é‡ŒåŠ å…¥ä¸€ä¸‹ï¼Œå› ä¸ºæˆ‘ä»¬çš„åŠ¨æ€åº“å’Œç³»ç»Ÿçš„åŠ¨æ€åº“æ˜¯ä¸ä¸€æ ·çš„ã€‚ç³»ç»Ÿçš„åŠ¨æ€åº“æ˜¯åŸæ¥ å°±æœ‰çš„ï¼Œä½†æ˜¯ä½ çš„è¿™ä¸ª æ˜¯æ‰©å±•çš„ ç³»ç»Ÿæ²¡æœ‰ ä½ éœ€è¦è‡ªå·±æ·»åŠ ï¼Œåœ¨runtime çš„æ—¶å€™å†å»åŠ¨æ€åŠ è½½
4. ä½¿ç”¨çš„æ—¶å€™ ä½ éœ€è¦  æ¢ä¸€ç§æ–¹å¼å»å¼•å…¥

```javascript
#import <TencentOpenAPI/TencentOAuth.h>
è¿™æ ·æ‰èƒ½å¼•å…¥
```

5. åŒæ—¶å‘¢ ä½ ä¹Ÿéœ€è¦åˆ† çœŸæœº å’Œ æ¨¡æ‹Ÿå™¨ ç„¶åè¿›è¡Œåˆå¹¶

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642084335615-48c74499-7d32-4e0b-9322-8ac7dd569d9a.png)



![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642084396658-86a9e3f1-9873-4f2a-9df8-d5e134bc0f89.png)

æˆ‘ä»¬ä¹Ÿèƒ½æŠŠFarmwork æ‰“åŒ…æ–¹å¼ ä¸‹çš„é™æ€åº“ è¿›è¡Œè½¬åŒ– å…·ä½“çš„é€‰é¡¹å†è¿™é‡Œ

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642084476121-f5130bd1-8cf3-44ed-9676-f2d5f85159f5.png)

## æˆ‘ä»¬å†æ¥çœ‹çœ‹ç™»å½•çš„ç ”åˆ¶ä½“ç³»
![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642084609663-9b1f9e71-cb47-4e26-99f6-8731344a872f.png)

å®é™…ä¸Š ç°åœ¨çš„ç™»å½•ç³»ç»Ÿéƒ½æ˜¯è¿™æ ·æ¥åšçš„ï¼ŒåŸºæœ¬ä¸Šå›½å†…çš„éƒ½æ˜¯æ¥å¦‚ä¸€å¥—ç‹¬ç«‹çš„ ç¬¬ä¸‰æ–¹ ç³»ç»Ÿï¼Œå®ƒä»¬åšçš„äº‹æƒ…å°±æ˜¯ï¼š

ä½ è¦é›†æˆçš„ç¬¬ä¸‰æ–¹æ¯”å¦‚ä½ è¦æ”¯æŒQQå¿«æ·ç™»å½•ï¼Œé‚£ä¹ˆä½ çš„åå°è¦å»æ¥å…¥QQçš„ä¸‰æ–¹ç™»å½•ä½“ç³»ï¼Œä½ é€šè¿‡å®ƒä»¬çš„æä¾›çš„APIæ‹¿åˆ°é‡Œé¢çš„æ•°æ®ï¼Œç»™ä½ è‡ªå·±çš„ç™»å½•ä½“ç³»ç”¨



OAuth å°±æ˜¯Appä¹‹é—´è°ƒæ•´ï¼Œä½†æ˜¯ç™»å½•çš„æ—¶å€™ è¿˜æ˜¯åœ¨ç¬¬ä¸‰æ–¹ç™»å½•çš„å†…éƒ¨è¿›è¡Œçš„ã€‚

OpenID  æ˜¯å¦ä¸€ç§ä½“ç³»ï¼Œä¸»è¦æ˜¯ç¬¬ä¸‰æ–¹çš„ä¿¡æ¯æ–¹æ³•ç»™ä½ çš„æ—¶å€™åšäº†ä¸€å±‚åŠ å¯†ğŸ”å¤„ç†

æˆ‘ä»¬ç°åœ¨å°±æ˜¯ç»“åˆä¸¤ä¸ª ä½¿ç”¨ ï¼ˆä¹Ÿæ˜¯ä¸»æµçš„ç™»å½•ä½“ç³»ï¼‰



## é›†æˆQQSDKé›†æˆç™»å½•
> ä¸Šè¿°éƒ½æ˜¯é“ºå«ï¼ç°åœ¨å¼€å§‹æ­£æ–‡ï¼
>



è¿™é‡Œæ˜¯qqçš„sdkè¿æ¥ [ğŸ”—](https://wiki.open.qq.com/index.php?title=iOS_SDK%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA) ï¼Œæœ‰ä¸€ç‚¹éœ€è¦è¯´æ˜ QQçš„SDK åœ¨æ²¡æœ‰Appçš„æ—¶å€™ é»˜è®¤æ‹‰èµ·ä¸€ä¸ª H5çš„ç™»å½•é¡µé¢ è¿›è¡Œç™»å½•ã€‚

é‡Œé¢çš„æ–‡æ¡£æœ‰è¿™æ ·çš„ä¸€å¥è¯

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642085641006-fe6a957f-bb54-46f4-8a7c-d0f6742a78c7.png)

å®é™…ä¸Šï¼Œä½ åªéœ€è¦æŠŠè¿™ä¸ªç³»ç»Ÿçš„ä¸œè¥¿ ï¼Œå®‰è£…å‰é¢è¯´çš„é›†æˆframwork æ–¹æ³•linkè¿›æ¥å°±å¥½äº†

æ¥ä¸‹æ¥å°±æ˜¯ï¼çœ‹æ–‡æ¡£ï¼  


å»ºè®®åˆ›å»ºä¸€ä¸ªå•ä¾‹æ¥è¿›è¡Œ ç»Ÿä¸€çš„ç®¡ç† ç®¡ç† ä¸‰æ–¹ç™»å½•ç›¸å…³çš„è¡Œä¸ºï¼Œéœ€è¦ç™»å½• è°ƒç”¨ä¸€ä¸‹å°±å¥½äº†ï¼Œæ¯”å¦‚ä»£ç é‡Œçš„GTLoginå•ä¾‹



 æ¯”å¦‚ä½ è¦åˆ†äº«è¯´æ˜ä»€ä¹ˆ ï¼Œæœ‹å‹åœˆä»€ä¹ˆçš„ï¼Œåªéœ€è¦å»é›†æˆqqçš„SDKï¼Œç„¶åè°ƒç”¨ä½ ä»¬çš„æ–¹æ³•å°±å¤Ÿç”¨äº†å“ˆã€‚



![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642086764514-ecb4643b-d00e-476d-bfeb-be417df969af.png)  
è¿™ä¸ªå°±æ˜¯æ•´ä¸ªçš„å›é¡¾ï¼å…¶ä»–çš„å„ç§ä¹±ä¸ƒå…«ç³Ÿçš„SDK ä¹Ÿæ˜¯ ç±»ä¼¼çš„é›†æˆæ–¹å¼

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642086862655-619fd357-fe5a-4262-8cc4-66b0f52c6f1f.png)



# å¦‚ä½•åšæ—¥å¿—é‡‡é›†å’Œä¸ŠæŠ¥
## ç†è®ºçŸ¥è¯†
> ä¸»è¦æ˜¯å­˜å‚¨é—®é¢˜ å’Œä¸ŠæŠ¥é—®é¢˜å“ˆ
>

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642087034911-00e9df6f-3fb5-4362-a861-46bc0cc6cd82.png)

åœ¨IOSä¸­çš„æ—¥å¿—ç³»ç»Ÿæ˜¯ä¸ä¸€æ ·çš„ï¼Œå®ƒæ˜¯ä¸€ç§å†…éƒ¨çš„æ—¥å¿—

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642165363471-1853568b-5eb9-438f-bf2d-bbff1177e31d.png)

NSlogæˆ‘ä»¬æ˜¯ä¸ç”¨çš„ï¼Œæˆ‘ä»¬ç”¨å¼€æºçš„æ¡†æ¶ CocaoLumberjackä¸­ï¼Œè¿™ä¸ªå¼€æºçš„åº“ï¼Œæä¾›äº†podæ–¹å¼çš„é›†æˆï¼Œè¿™ä¸ªæ˜¯æ¯”è¾ƒå¥½çš„ï¼Œæˆ‘ä»¬ç›´æ¥æ·»åŠ ä¾èµ–ï¼Œè¿›è¡Œä½¿ç”¨å°±å¥½äº†ï¼Œéå¸¸çš„æ–¹ä¾¿

```podFile

```objectivec
platform :ios, "12.0"

inhibit_all_warnings!

target 'SampleApp' do
	pod 'AFNetworking'
	pod 'SDWebImage'
	pod 'CocoaLumberjack'
end
```







## æ—¥å¿—æ”¶é›†CocoaLumberjackåˆ†æ
> æˆ‘ä»¬æ¥åˆ†æ è¿™ä¸ªå¼€æºçš„åº“
>

æˆ‘ä»¬æ‹‰çœ‹DDLog,h å¤´æ–‡ä»¶å°±èƒ½æ‰¾åˆ°å…¶æ ¸å¿ƒï¼DDLogè¿™ä¸ªåº“ï¼Œé‡Œé¢æœ‰å¾ˆå¤šçš„å®ï¼Œä½ åªéœ€è¦å»è°ƒç”¨å®ƒå°±å¥½äº†ã€‚DDLogè¿˜å¯ä»¥å¸®åŠ©æˆ‘ä»¬å­˜å…¥æœ¬åœ°ï¼Œç„¶åå†ä»ä¸­æ´—å‡ºæ¥

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642166179271-b31434c9-21d4-4458-8941-e0a2884d5845.png)

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642166229539-7cd3cc8f-3c38-4c2e-b020-b0109418394f.png)

ç†è§£è¿™ç§æ—¥å¿—ç³»ç»Ÿçš„æ¶æ„ï¼Œæœ‰åˆ©äºæˆ‘ä»¬åæœŸæ„å»ºè‡ªå·±çš„ æ—¥å¿—ç³»ç»Ÿï¼Œå­˜çš„æ–¹å¼æ—¥å¿—æ— éå°±æ˜¯stringç»„åˆæˆçš„ æ•°æ®

å…¶ä¸­è¿˜è¦å¤„ç† å¾ˆå¤šåœºæ™¯ï¼Œæ¯”å¦‚å¦‚ä½•å­˜ï¼Œæ–­ç½‘å¦‚ä½•çº¯æœ¬åœ°ï¼Œå¦‚ä½•æ›´æ–°ï¼Œéœ€è¦å®šæ—¶ä¸ŠæŠ¥

## å¦‚ä½•æ”¶é›†å´©æºƒæ—¥å¿—Crash
> æˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯ crash çš„æ—¶å€™æ”¶é›†å †æ ˆä¿¡æ¯ï¼Œå­˜åˆ°æœ¬åœ°ï¼Œç„¶åè¿›è¡Œä¸ŠæŠ¥
>

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642170778331-7819290a-fab4-432d-b3b2-ee9a4f82a884.png)

äº‹å®ä¸Šï¼Œæœ€ä¸»è¦çš„å·¥ä½œè¿˜æ˜¯åˆ†æï¼Œå®¢æˆ·ç«¯ä¸»è¦æ˜¯ å¤„ç†é‡‡é›†èµ·æ¥çš„æ•°æ®

å¯¹äºæ•è·Crash ä¸»è¦æœ‰ä¸‹é¢çš„æ–¹æ¡ˆ

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642171004573-d6706644-319b-4a52-af09-03d5b946ee44.png)

æ›´åº•å±‚çš„æ“ä½œå¯èƒ½è¿˜æ˜¯éœ€è¦æ“ä½œåº•å±‚C++ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯ç”¨å¼€æºçš„åº“ å°±å¥½ä¸€äº›æ¯”å¦‚KSCrash



ä¸‹é¢çš„æ“ä½œï¼Œæˆ‘ä»¬æ˜¯ä½¿ç”¨è‡ªå·±æ‰‹å†™æ–¹æ³•æ¥æ•è·å®ƒã€‚å…³äºå¼•èµ· crash ä¸»è¦æœ‰ä¸¤ç±»ï¼ˆä¸»è¦å“ˆï¼Œæ„æ€æ˜¯è¿˜æœ‰æ›´å¤šçš„ï¼‰ä¸€ä¸ªæ˜¯NSExpoorsioni å’Œ singalï¼ˆä¿¡å·é‡ï¼‰



```objectivec
// Appdeleget.m
#pragma mark - CRASH
++++
   mianå‡½æ•°åªèƒ½è¦æ³¨å†Œå®ƒï¼Œè¿˜æ˜¯å»ºè®® ä½¿ç”¨æˆç†Ÿçš„å¼€æºæ–¹æ¡ˆ
    //æµ‹è¯•crashæ”¶é›†
    //[self _caughtException];
    //[@[].mutableCopy addObject:nil];

++++

- (void)_caughtException{
    //NSexception
    NSSetUncaughtExceptionHandler(HandleNSException);
    
    //signal 
    signal(SIGABRT, SignalExceptionHandler);
    signal(SIGILL, SignalExceptionHandler);
    signal(SIGSEGV, SignalExceptionHandler);
    signal(SIGFPE, SignalExceptionHandler);
    signal(SIGBUS, SignalExceptionHandler);
    signal(SIGPIPE, SignalExceptionHandler);
}

void SignalExceptionHandler(int signal){
    void* callstack[128];
    int frames = backtrace(callstack, 128);
    char **strs = backtrace_symbols(callstack, frames);
    NSMutableArray *backtrace = [NSMutableArray arrayWithCapacity:frames];
    for (int i = 0; i < frames; i++) {
        [backtrace addObject:[NSString stringWithUTF8String:strs[i]]];
    }
    free(strs);
    //å­˜å‚¨crashä¿¡æ¯ã€‚
}

void HandleNSException(NSException *exception){
    __unused NSString *reason = [exception reason];
    __unused NSString *name = [exception name];
    //å­˜å‚¨crashä¿¡æ¯ã€‚
}
```

## å…³äºä¸ŠæŠ¥æ–¹æ¡ˆ
> ä¸»è¦æ˜¯ä¸¤ç±» ä¸€ç±»æ˜¯  åŸ‹ç‚¹ï¼Œä¸€ä¸ªæ˜¯æ— åŸ‹ç‚¹çš„ï¼ˆæ— ç—•çš„ï¼‰
>

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642171633709-5fe777f7-e705-42e9-889c-77eec27cd904.png)

![](https://cdn.nlark.com/yuque/0/2022/png/1627571/1642172011454-b3ecf202-c1aa-4c0b-8f50-607c1398cd36.png)



