---
title: "React Native å¼€å‘è§„èŒƒä¸é¡¹ç›®æ–‡æ¡£"
date: "2024-12-19"
summary: "åŒ…å« RN é¡¹ç›®æ¨¡æ¿è¯´æ˜ã€å¼€å‘è§„èŒƒã€å·¥ä½œæµç¨‹ã€æ¨¡å—è®¾è®¡ã€å•å…ƒæµ‹è¯•å’Œå‘å¸ƒæµç¨‹çš„å®Œæ•´æ–‡æ¡£"
status: "completed"
tech: ["React Native", "TypeScript", "Jest"]
github: "https://github.com/BM-laoli"
arxiv: ""
keyId: "App"
---

> è¿™é‡Œæ˜¯nggf-cli v1.0 é¡¹ç›®æ¨¡æ¿ å’Œè„šæ‰‹æ¶çš„å®˜æ–¹æ–‡æ¡£ã€‚ç›®å‰ä»…åŒ…å«äº†ä¸€äº›templateé¡¹ç›®æ¨¡æ¿è¯´æ˜ å’Œå¼€å‘æ–‡æ¡£ gitæµç¨‹è¯´æ˜å’Œç ”å‘æµç¨‹è§„èŒƒæ¢³ç†
>



## ä¸€ã€å…³äºå¼€å‘æ‰‹å†Œå’Œè§„èŒƒ
> è¿™é‡Œæè¿°çš„ä¸»è¦æ˜¯ç¼–ç å±‚é¢çš„è§„åˆ™
>

### 1. æ–‡ä»¶å¤¹ç»“æ„ï¼ˆRNï¼‰
![](https://cdn.nlark.com/yuque/0/2021/png/1627571/1630476496721-5eadafec-ed53-4b60-b054-e8142434facc.png)

å¦‚æœæ‚¨æœ‰å¥½çš„å»ºè®®ï¼ŒğŸ‘ğŸ»å†githubæissuesï¼š [https://github.com/BM-laoli/TodoMaxRn/issues](https://github.com/BM-laoli/TodoMaxRn/issues)

ç›®å‰æš‚æ—¶ä¹ˆæœ‰æ‰¾åˆ°åˆ†æ¨¡å—åˆ†åŒ…çš„æ–¹æ³•ï¼Œæš‚æ—¶ä½¿ç”¨ä¸€ä¸ªæ¨¡å—ï¼ŒåæœŸä¼˜åŒ–æˆ–è€…ä¸šåŠ¡ä¸å¿™å¾—æ—¶å€™å†æ¥æ”¹è¿›



// 2023/10/31æ—¥ä¿®è®¢

è¿™ä¸ªåœ°æ–¹çœ‹èµ·æ¥ ä¸åº”è¯¥æŒ‰ç…§é¡µé¢ä¸ºæ€è€ƒæ¨¡å¼å»é…ç½®æ–‡ä»¶å¤¹ï¼Œè€Œæ˜¯åº”è¯¥ä»¥æ¨¡å—çš„å½¢å¼å»é…ç½®æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚  
ä½ æœ‰ä¸€ä¸ªBanneré‡‘åˆšä½ï¼Œé‚£ä¹ˆæ¯ä¸€ä¸ªéƒ½åº”è¯¥æ˜¯ ä¸€ä¸ªå•ç‹¬çš„æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—é‡Œæœ‰å¾ˆå¤šå…¶å®ƒçš„Screen æ³¨æ„ä¸è¦ç”¨pageä¸ºæ¦‚å¿µäº†ï¼ŒåšApp/H5/å°ç¨‹åº åº”è¯¥ä»¥ æ¨¡å—moduleä¸ºæ¦‚å¿µã€‚MianSiteæˆ–è®¸æœ‰å¾ˆå¤šè·¯ç”±åå­— å¯ä»¥ç”¨æ¥å¾ˆå¥½çš„åšæ¨¡å—åŒºåˆ†



### 2. FC.Component å’ŒClass.Component


å‡½æ•°ç»„ä»¶å’Œclassç»„ä»¶çš„å†™æ³• è¿™é‡Œåˆ†åˆ«æ”¾äº†ä¸¤ä¸ªä¾‹å­æ–¹ä¾¿æ‚¨æŸ¥é˜…

```jsx
import React from 'react';
import {Text, View} from 'react-native';

export interface  InterTuisonDemoeProps {}
export interface  InterTuisonDemoeState {}

class TuisonDemoe extends React.Component<InterTuisonDemoeProps, InterTuisonDemoeState> {
  constructor(props: InterTuisonDemoeProps | Readonly<InterTuisonDemoeProps>){
    super(props)
    this.state={
      name:'joney'
    }
  }

  componentDidMount = ()=>{
    // init
  }
  
  render() {
    return (
      <View>
        <Text>æµ‹è¯•ä¸€ä¸‹æ¨é€æœåŠ¡</Text>
      </View>
    );
  }
}

export default TuisonDemoe;

```

FCç»„ä»¶çš„å†™æ³•ï¼Œè‹¥ä½¿ç”¨å‡½æ•°ç»„ä»·ï¼Œè¯·å†åˆé€‚çš„æ—¶æœºè€ƒè™‘ useMemoæˆ–è€…useCallback

```jsx
import {useNavigation, useRoute} from '@react-navigation/native';
import React, {useEffect, useState, Component} from 'react';
import {
  View,
  Text,
  ScrollView,
  StyleSheet,
  ImageBackground,
  LogBox,
} from 'react-native';
import {DebugManager} from '../../../../core/react-native-debug-tool';
import {Button, Image} from 'react-native-elements';
import Swiper from 'react-native-swiper';
import {getAppData, getData, storeAppData} from '../../../storage';
import DeviceInfo from 'react-native-device-info';
import {Alert} from 'react-native';
import RootSiblingsManager from 'react-native-root-siblings';
const image1 = require('../../../assets/images/Agreements.png');
const image2 = require('../../../assets/images/CashFlow.png');
const image3 = require('../../../assets/images/CustomerResearch.png');
const image4 = require('../../../assets/images/Meditation.png');

// è¿™é‡Œæƒ³å½“ä¸æ˜¯ä¸€ä¸ªMain å¿…é¡»è¦ ä¸€äº›åœ°æ–¹çš„é›†æˆçš„ä¸œè¥¿éƒ½åœ¨è¿™é‡Œäº†
export interface  InterTest1Props{}
export interface  InterTest1State {}

const Test1: React.FC<InterTest1Props, InterTest1State> = props => {

  const [loading, setLoading] = useState(true);
  const [state, setState] = useState(0); // 0 ç¬¬ä¸€æ¬¡ä½¿ç”¨app 1 æ²¡æœ‰ç™»å½•  2ç™»å½•äº†
  const navigation = useNavigation();
  const route = useRoute();

  const initSync = async () => {
    let serverUrlMap = new Map();
    serverUrlMap.set('Online', '192.168.124.16:3000');
    for (let i = 1; i < 4; i++) {
      serverUrlMap.set('test00' + i, `https://domain-00${i}.net`);
    }
    DebugManager.initDeviceInfo(DeviceInfo).initServerUrlMap(
      serverUrlMap,
      'Online',
      baseUrl => {
        setTimeout(
          () => Alert.alert('ç¯å¢ƒåˆ‡æ¢', 'æœåŠ¡å™¨ç¯å¢ƒå·²ç»åˆ‡æ¢è‡³' + baseUrl),
          1000,
        );
      },
    );
    DebugManager.showFloat(RootSiblingsManager);
  };

  const checkFrIstAndLogin = async () => {
    const value = await getAppData();
    const userInfo = await getData();
    setLoading(false);
    if (!value?.isFirst) {
      setState(0);
      return;
    }
    console.log(value);
    if (!userInfo?.access_token?.length) {
      setState(1);
      navigation.replace('Test2');
      return;
    }

    setState(2);
    navigation.replace('DrawerStackNavigator');
  };

  useEffect(() => {
    try {
      LogBox.ignoreAllLogs();
      initSync();

      checkFrIstAndLogin();
      // setLoading(false);
    } catch (error) {
      console.log(error);
    }
  }, []);

  const ViewLoading = () => {
    return (
      <View style={styles.slide1}>
        <ImageBackground
          source={image4}
          resizeMethod="scale"
          style={styles.image}></ImageBackground>
        <Text style={styles.text}>loading....</Text>
      </View>
    );
  };

  return (
    <View style={{flex: 1}}>
      {loading ? (
        <ViewLoading />
      ) : !state ? (
        <Swiper style={styles.wrapper} loop autoplay showsButtons={false}>
          <View style={styles.slide1}>
            <ImageBackground
              source={image1}
              resizeMethod="scale"
              style={styles.image}></ImageBackground>
            <Text style={styles.text}>æ¬¢è¿ä½¿ç”¨TodoMax</Text>
          </View>
          <View style={styles.slide2}>
            <ImageBackground
              source={image2}
              resizeMethod="scale"
              style={styles.image}></ImageBackground>
            <Text style={styles.text}>åœ¨è¿™é‡Œé‡è§æ›´å¥½çš„è‡ªå·±</Text>
          </View>
          <View style={styles.slide3}>
            <ImageBackground
              source={image3}
              resizeMethod="scale"
              style={styles.image}></ImageBackground>
            <View>
              <Button
                title="å¼€å§‹ä½¿ç”¨"
                onPress={() => {
                  storeAppData({isFirst: true});
                  navigation.replace('Test2');
                }}></Button>

              <Button
                title="å»WebView"
                onPress={() => {
                  navigation.push('WebView');
                }}></Button>
              <Button
                title="å»æå…‰"
                onPress={() => {
                  navigation.push('JpushDemo');
                }}></Button>
            </View>
          </View>
        </Swiper>
      ) : state == 1 ? (
        <ViewLoading />
      ) : null}
    </View>
  );
};

export default Test1;

const styles = StyleSheet.create({
  wrapper: {},
  slide1: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: '#FFF',
  },
  slide2: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: '#FFF',
  },
  slide3: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: '#FFF',
  },
  text: {
    color: 'rgba(0,0,0, .65)',
    fontSize: 30,
    fontWeight: 'bold',
  },

  image: {
    width: 250,
    height: 255,
  },
});

```

### 3. å‘½åã€ å˜é‡å¸¸é‡ ã€ æšä¸¾
    - [x] å˜é‡ï¼š
        1. ä¸è¦å†™ä»¤äººè´¹è§£çš„ç¼©å†™ å¦‚æœç¡®å®šè¿™ä¸ªç¼©å†™å¯ä»¥åˆ—ä¸¾é‚£ä¹ˆå…è®¸ä½¿ç”¨	
        2. å¤šå•è¯ç»„åˆä½¿ç”¨ â€œå°é©¼å³°â€ å¦‚ï¼šgetName, loginUserMessageç­‰
        3. æ–¹æ³•ä¸€å¾‹â€œå°é©¼å³°â€ï¼Œé™¤éä½ æœ‰ç‰¹æ®Šçš„ç†ç”±
        4. linuxå¯¹å¤§å°å†™æ•æ„Ÿï¼Œwindowsæ¯”è¾ƒå®½æ¾ï¼Œå› æ­¤è¿™é‡Œè§„èŒƒï¼š ç›®å½•ç»„ç»‡å®Œæˆåcommitåˆ°gitä¹‹åä¸è¦éšæ„çš„æ›´æ”¹æ–‡ä»¶å¤¹/æ–‡ä»¶åç§° ï¼Œæ›´æ”¹ä¹‹åè¯·ç¡®å®š æ­¤æ›´æ”¹ ä¸å½±å“ åŠŸèƒ½è¿è¡Œ
        5. é¡µé¢çº§æ–‡ä»¶å¤¹ä¸€å¾‹å¤§å†™ï¼Œcomponentsï¼Œpageï¼Œstoreï¼Œcommon ï¼Œcoreç­‰å…³é”®è¯å·²ç»å…·å¤‡ç‰¹æ®Šå«ä¹‰çš„é€šç”¨æ¨¡å— å•è¯ å…è®¸ä½¿ç”¨å°å†™ å¤šå•è¯éµå¾ªï¼šâ€œå¤§é©¼å³°â€è§„èŒƒ
    - [x] å‘½åï¼š
        1. è‡ªå»ºä¸šåŠ¡ç»„ä»¶ä½¿ç”¨ â€œå¤§é©¼å³°â€è§„åˆ™
        2. æ–¹æ³•ä½¿ç”¨ï¼šâ€œå°é©¼å³°â€è§„åˆ™
        3. class ä¸€å¾‹ä½¿ç”¨å°å†™å’ŒçŸ­æ¨ªçº¿æ ¼å¼ä¸è¦æ•´å¤§å†™ï¼ŒRNä¸­ä½¿ç”¨å°é©¼å³°åŸåˆ™
        4. å¦‚æœä½ ä½¿ç”¨äº†Hocå°è£…ï¼Œè¯·æ˜¯Hoc + "å¤§é©¼å³°"è§„åˆ™



    - [x] å¸¸é‡å’Œæšä¸¾
        1. å¸¸é‡ä¸€å¾‹è¦æ±‚å¤§å†™ï¼Œå¤šå•è¯ä½¿ç”¨_åˆ†å‰² DEFAULT_NAME      => (default_name )
        2. ä¸å…è®¸å‡ºç°é­”æ³•æ•°å­—ï¼Œè¯·ä¸€å¾‹ä½¿ç”¨ æšä¸¾emuæ¥å®šä¹‰å“ªæ€•æ˜¯0 å’Œ1 éƒ½è¦ç»™å­˜ä¸€ä¸‹ä¸€ä¸ªæšä¸¾



### 4. Tsè§„åˆ™
1. é™¤éä½ æœ‰éå¸¸å¿…è¦çš„éœ€æ±‚ï¼Œå¦åˆ™è¯·ä¸è¦ä½¿ç”¨å‡½æ•°é‡è½½ï¼Œå› ä¸ºè¿™çœ‹ä¸Šå»å¯è¯»æ€§ä¸é«˜ï¼Œå¤æ‚æ€§å¢å¼º
2. å°½å¯èƒ½çš„å¤ç”¨ä½ çš„typeå’Œinterface ä½ å¯ä»¥ä»è¿™ç¯‡æ–‡ç« æ‰¾åˆ°ä¸€äº›é«˜çº§è¯­æ³• å»å®ç° ä»ç°æœ‰çš„interface å’Œtypeä¸­å‰¥ç¦»å‡ºä¸€äº›ç†Ÿæ‚‰ æˆ–è€…ä½¿å¾—ä¸€äº›å±æ€§å˜æˆå¯é€‰çš„ [å·¥å…·ç±»å‹](https://www.typescriptlang.org/docs/handbook/utility-types.html#omittype-keys)
3. åœ¨ç±»å‹ä¸ç¡®å®šçš„æ—¶å€™ä½¿ç”¨æ³›å‹æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©
4. ç¦æ­¢ä½¿ç”¨any



### 5. Reactä¹¦å†™å»ºè®®âœğŸ»
    - [x] å¼ºåˆ¶æ€§çº¦å®š



ç±»ç»„ä»¶ -> ç±»ç»„ä»· âœ”

å‡½æ•°ç»„ä»¶ -> å‡½æ•°ç»„ä»¶ âœ”

ç±»ç»„ä»¶ -> å‡½æ•°ç»„ä»¶ âœ”

å‡½æ•°ç»„ä»¶ ->   ç±»ç»„ä»¶ âŒ

ä¸è¦å‡ºç° ä¼ é€’ åŒ¿åå‡½æ•°çš„æƒ…å†µ

```jsx
	render(){
  	return (<div onClick={ ()=> { /** do something **/ } } >me</div>)
  }
```



    - [x] å»ºè®®æ€§çº¦å®š

hooksä¸­çš„hookæ‰§è¡Œæ˜¯æœ‰é¡ºåºçš„ï¼è¿™ä¸€ç‚¹ä¸€å®šè¦è°¨è®°ï¼è°¨è®°ï¼è°¨è®°!,åˆ«çš„è§„èŒƒåœ¨å®˜æ–¹æ–‡æ¡£ä¸­å†™å¾—éå¸¸è¯¦ç»†äº†

### 6.Mobxä½¿ç”¨è§„èŒƒ
    - [x] æœ€é‡è¦çš„åªæœ‰ä¸€ç‚¹ï¼ ä¸è¦ç›´æ¥æ”¹Mobxçš„å€¼ï¼Œè¯·ä½¿ç”¨setå®ƒçš„æ–¹æ³• é€šè¿‡actionå»æ”¹å€¼ï¼Œ
    - [x] ä¸è¦ï¼å¥—ç”¨ï¼ä¸è¦å¥—ç”¨ï¼ä¸è¦å¥—ç”¨ï¼



 è¯¦æƒ…çš„ä½¿ç”¨å¯ä»¥å»æŸ¥çœ‹Templateæˆ–è€…gitä¸Šçš„todomaxä»“åº“

```jsx
import {makeAutoObservable} from 'mobx';
import logisticsApi from '@/service/apis/logistics';
import {go} from '@/common/utils';
// go æ˜¯ä» @ç¾å›¢ æ¶›å“¥é‚£é‡Œå­¦ä¹ æ¥çš„

// åŒ…è£… Promise å‡å°‘ä¸å¿…è¦çš„try catchä»£ç å—
const go = <T>(promiseFn: Promise<T>): Promise<[InterResError | undefined, T | undefined]> => {
  // eslint-disable-next-line sonarjs/no-unused-collection
  let res: [InterResError | undefined, T | undefined] = [undefined, undefined];
  return promiseFn
    .then((data: T) => {
      res = [undefined, data];
      return res;
    })
    .catch((err: InterResError) => {
      res = [err, undefined];
      return res;
    });
};
  
import userStore from './userStore';
export interface packageItem {
  packageId: string;
  shippingCarrier: string;
  shippingService: number;
  trackingNumber: number;
  shipStatus: string;
  deliveryTime: string;
  shipDate: string;
  items: Array<{
    itemTitle: string;
    primaryImage: string;
    sellerPartNumber: string;
  }>;
}
interface Logistics {
  orderNumber: number | undefined;
  packageItemList: Array<packageItem> | undefined;
}
class LogisticsStore {
  constructor() {
    makeAutoObservable(this);
  }

  logisticsDetails: Record<string, any> = {};

  setLogisticsDetails = (details: Record<string, any> = {}) => {
    this.logisticsDetails = details;
  };
  // è·å–ç‰©æµä¿¡æ¯
  requestLogisticsDetails = async (orderNumber: string) => {
    const params = {
      orderNumber: orderNumber,
      sellerId: userStore.getCurrentSellerInfo.sellerId,
    };
    const [err, res] = await go(logisticsApi.requestLogisticsDetails(params));
    // @ts-ignore
    const data: Logistics = res;
    this.setLogisticsDetails(data?.packageItemList || []);
  };
}

const logisticsStore = new LogisticsStore();

export default logisticsStore;

// ç»Ÿä¸€å¯¼å‡º
export default {
  logisticsStore
}

// ä½¿ç”¨
const Logistics = () => {
  //++++++
  const {logisticsDetails, requestLogisticsDetails, setLogisticsDetails} = useLocalObservable(
    () => store.logisticsStore,
  );
  const {setOriginOrderShipService} = useLocalObservable(() => store.shipmentsStore);
  //++++++
}
export default observer(Logistics);
```



### 7.å…³äºå­—ä½“ éœ€è¦åšçš„
> æˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯å›ºå®šè®¾ç½®å¥½å­—ä½“ï¼Œä»¥ä¿è¯å¾ˆUIè®¾è®¡çš„å°ºå¯¸ä¸€è‡´ï¼Œä¸‹é¢æ˜¯æˆ‘ä»¬çš„ä¸€ä¸ªå·¥å…·æ–¹æ³•ï¼Œå…¶å®åŸç†å¾ˆç®€å• å°±æ˜¯è¿›è¡Œç¼©æ”¾ ä¸careå¤§å°
>

```tsx
//
import {StyleSheet, Dimensions, Platform} from 'react-native';
import {ImageStyle, TextStyle, ViewStyle} from 'react-native';
import {isTablet} from 'react-native-device-info';

export interface CustomNamedRenderStyles {
  [key: string]: ViewStyle & TextStyle & ImageStyle;
}
// å¯ç”¨äºç›´æ¥è½¬åŒ–çš„å±æ€§ï¼Œ
const translateProps = [
  'width',
  'height',
  'lineHeight',
  'minWidth',
  'minHeight',
  'maxWidth',
  'maxHeight',
  'marginTop',
  'marginBottom',
  'marginLeft',
  'marginRight',
  'marginVertical',
  'marginHorizontal',
  'paddingTop',
  'paddingBottom',
  'paddingLeft',
  'paddingRight',
  'paddingVertical',
  'paddingHorizontal',
  'top',
  'bottom',
  'left',
  'right',
  'lineHeight',
  'borderRadius',
  'borderTopWidth',
];
// å¯ç”¨äºå­—ä½“çš„è½¬åŒ–å±æ€§
const translateFontProps = ['fontSize', 'lineHeight'];

const translateOnWidth = (value: number) => {
  if (isNaN(value)) {
    return value;
  }
  if (isTablet()) {
    if (value === STANDARD_WIDTH) {
      return DEVICE_WIDTH;
    }
    return value;
  }
  return Math.round((value / STANDARD_WIDTH) * DEVICE_WIDTH);
};

// è®¾è®¡æå°ºå¯¸ä»¥åŠï¼Œæ¨ªç«–å±åˆ‡æ¢
const STANDARD_WIDTH = 375;
const STANDARD_HEIGHT = 812;
const FONT_SIZE_SCALER: number = 1;
const DEVICE_WIDTH =
  Dimensions.get('window').width > Dimensions.get('window').height
    ? Dimensions.get('window').height
    : Dimensions.get('window').width;
const DEVICE_HEIGHT =
  Dimensions.get('window').width > Dimensions.get('window').height
    ? Dimensions.get('window').width
    : Dimensions.get('window').height;

const GLOBALWIDTH = Dimensions.get('window').width;
const GLOBALHEIGHT = Dimensions.get('window').height;

// æ¨ªç«–å±åˆ‡æ¢ + å±å¹•é€‚é…æ¢ç®—
const getTranslateWidthWithDevice = (originWidth: number): number => {
  if (isNaN(originWidth)) {
    return originWidth;
  }
  if (isTablet()) {
    if (originWidth === STANDARD_WIDTH) {
      return DEVICE_WIDTH;
    }

    return originWidth;
  }
  return Math.round((originWidth / STANDARD_WIDTH) * DEVICE_WIDTH);
};

const getTranslateHeightWithDevice = (originHeight: number): number => {
  if (isNaN(originHeight)) {
    return originHeight;
  }

  if (isTablet()) {
    return originHeight;
  }
  return Math.ceil((originHeight / STANDARD_HEIGHT) * DEVICE_HEIGHT);
};

// è®¾ç½® å­—ä½“
const FonStyle = (value: Pick<TextStyle, 'fontSize' | 'lineHeight'>) => {
  const {fontSize, lineHeight} = value;
  return {
    ...(fontSize && {fontSize: getTranslateFontSize(fontSize)}),
    ...(lineHeight && {lineHeight: getTranslateLineHeight(lineHeight)}),
  };
};

// å­—ä½“ç¼©æ”¾
const getTranslateFontSize = (originFontsize: number) => {
  return Platform.OS === 'android'
    ? getTranslateWidthWithDevice(originFontsize) * FONT_SIZE_SCALER
    : getTranslateWidthWithDevice(originFontsize);
};

// å­—ä½“Lineç¼©æ”¾
const getTranslateLineHeight = (originLineHeight: number) => {
  return Platform.OS === 'android'
    ? parseInt((getTranslateWidthWithDevice(originLineHeight) * FONT_SIZE_SCALER).toString())
    : getTranslateWidthWithDevice(originLineHeight);
};

// ä¸»å‡½æ•°
const createNeweggStyles = (styles: CustomNamedRenderStyles) => {
  const tmpStyles: CustomNamedRenderStyles = {...styles};
  for (const key in styles) {
    if (Array.isArray(styles[key])) {
      const flattenValue = Object.assign({}, styles[key]);
      styles[key] = flattenValue;
    }
    tmpStyles[key] = getTranslatePropertyWithWidth(styles[key]);
  }
  return StyleSheet.create(tmpStyles);
};

// è½¬æ¢å‰¯å‡½æ•°
const getTranslatePropertyWithWidth = (style: {[x: string]: any; hasOwnProperty: (arg0: string) => any}) => {
  let tmpStyles: {[x: string]: any} = {...style};

  translateProps.forEach((property) => {
    if (style.hasOwnProperty(property)) {
      tmpStyles[property] = getTranslateWidthWithDevice(style[property]);
    }
  });

  translateFontProps.forEach((property) => {
    if (style.hasOwnProperty(property)) {
      tmpStyles = {
        ...tmpStyles,
        ...FonStyle(style[property]),
      };
    }
  });
  return tmpStyles;
};

export {
  getTranslateWidthWithDevice,
  getTranslateHeightWithDevice,
  FonStyle,
  getTranslateFontSize,
  getTranslateLineHeight,
  createNeweggStyles,
  GLOBALWIDTH,
  GLOBALHEIGHT,
  translateOnWidth,
};


// ä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•
import {createNeweggStyles} from '@/common/utils/style';

const styles = createNeweggStyles({
  showContainer: {
    flex: 1,
    width: '100%',
    display: 'flex',
  },
  hiddenContainer: {
    height: 0,
    width: 0,
    display: 'none',
  },
  container: {
    width: '100%',
    flex: 1,
  },
  hiddenList: {
    height: '0%',
  },
  showList: {
    height: '93%',
  },
  tabWarp: {
    width: '100%',
    flexDirection: 'row',
    justifyContent: 'flex-start',
    paddingHorizontal: 16,
  },
  tabItemWarp: {
    display: 'flex',
    flexDirection: 'row',
    justifyContent: 'space-between',
    paddingHorizontal: 8,
  },
  tabItemWarpTouch: {
    paddingVertical: 14,
    paddingHorizontal: 8,
    borderBottomWidth: 0,
    marginRight: 16,
  },
  tabActiveTouch: {
    paddingBottom: 4,
    borderBottomWidth: 2,
    borderColor: '#F06C00',
  },
  tabActiveText: {
    color: '#000',
    fontWeight: 'bold',
  },
  itemOrderButton: {
    height: 32,
    borderRadius: 22,
    marginLeft: 8,
    marginTop: 12,
  },
  itemOrderButtonText: {
    fontSize: 15,
    fontWeight: 'bold',
    color: '#6E6E6E',
    marginRight: 4,
  },
  itemOrderButtonFilterText: {
    fontSize: 15,
    fontWeight: 'bold',
    color: '#6E6E6E',
    marginLeft: 8,
  },
  goToTop: {
    width: 40,
    height: 40,
    position: 'absolute',
    right: 30,
    borderRadius: 50,
  },
  isLoadingNext: {
    width: '100%',
    height: 30,
    flexDirection: 'row',
    justifyContent: 'center',
    alignItems: 'center',
  },
  noMoreWrap: {
    height: 50,
    alignItems: 'center',
  },
  noMoreWrapText: {
    color: '#999999',
    fontSize: 14,
    marginTop: 5,
    marginBottom: 5,
  },

  mb120: {
    marginBottom: 160,
  },
  changeTypeWrap: {
    justifyContent: 'space-between',
    flexDirection: 'row',
    backgroundColor: 'rgb(240, 241, 247)',
    paddingBottom: -12,
    paddingHorizontal: 16,
    flexWrap: 'wrap',
    alignItems: 'center',
  },
  activeButtonWrap: {
    backgroundColor: '#4C85E6',
    borderColor: 'rgba(0, 0, 0, 0.0)',
  },
  activeButtonText: {
    color: '#fff',
  },
  mt12: {
    marginTop: 12,
  },
  listWrap: {
    height: '100%',
  },
  mt50: {
    marginTop: 50,
  },
  mtF50: {
    marginTop: -50,
  },
  // ---------------------------------------------------
  wrapContainer: {
    backgroundColor: 'rgb(240, 241, 247)',
  },
  FlatListStyle: {
    flex: 1,
    paddingHorizontal: 16,
  },
});
export default styles;

```

### 
### 8.å…³äºAndroidçš„åå¥—å£³
> è¿™ä¸ªå°±å¾ˆç®€å•äº† åŸç†å°±æ˜¯ åœ¨è¿è¡Œæ—¶æ£€æµ‹ å½“å‰çš„ç­¾åMD5 æ˜¯å¦ä¸€è‡´ ï¼Œä¸ä¸€è‡´å°±ç›´æ¥ç»™ä»–é—ªé€€
>

```java
package com.ngmsellerapp;

import android.app.Activity;
import android.content.Context;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.content.pm.Signature;
import android.util.Log;

import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

public class SignatureCheck {

//   APP_SIGNATUREåˆ°åº•æ˜¯ä»€ä¹ˆ
//   private static final String APP_SIGNATURE = "///";    // debug_key
     private static final String APP_SIGNATURE = "///";   // release_key
//   è‡ªå·±ç‹¬ç«‹å‘å¸ƒ apk å¯ä»¥ä½¿ç”¨ ä¸Šé¢çš„ç­¾åã€‚
//   å‘åˆ° google play ä¸Šçš„åŒ…ä½¿ç”¨äº† google çš„ç­¾åï¼Œæ‰€ä»¥ç­¾åå¯†é’¥key æ˜¯ä¸‹é¢çš„ è€Œä¸æ˜¯è‡ªå·±çš„keyäº†ï¼Œgoogle è‡ªå·±çš„ç­¾å
//    æŸ¥çœ‹æ–¹å¼å°±æ˜¯ keytool -v -list -keystore ./my-release-key.keystore ï¼Œæ³¨æ„debug å’Œrelease æ˜¯ä¸ä¸€æ ·çš„å“ˆ å¯†ç ä½ åº”è¯¥æœ‰
//   private static final String APP_SIGNATURE = "///";   // release_key
  public SignatureCheck() {}

    public void checkSignature(Context context) {
        try {
            if (!validateAppSignature(context)) {
                killProcess(context);
            }
        } catch (PackageManager.NameNotFoundException e) {
            Log.e("SignatureCheck", "SignatureCheck exception:" + e.getMessage());
            e.printStackTrace();
        }
    }

    private void killProcess(Context context) {
        if (context instanceof Activity){
            ((Activity) context).finish();
            System.exit(0);
        }
    }

    private boolean validateAppSignature(Context context) throws PackageManager.NameNotFoundException {

        PackageInfo packageInfo = context.getPackageManager().getPackageInfo(
                context.getPackageName(), PackageManager.GET_SIGNATURES);
        //note sample just checks the first signature
        for (Signature signature : packageInfo.signatures) {
            // SHA1 the signature
            String sha1 = getSHA1(signature.toByteArray());
            Log.d("MainActivity",  "sha1:" + sha1);
            Log.d("MainActivity", APP_SIGNATURE.equals(sha1) ? "sha1: true" : "sha1: false");
            // check is matches hardcoded value
            return APP_SIGNATURE.equals(sha1);
        }

        return false;
    }

    //computed the sha1 hash of the signature
    public static String getSHA1(byte[] sig) {
        MessageDigest digest = null;
        try {
            digest = MessageDigest.getInstance("SHA1");
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
        }
        digest.update(sig);
        byte[] hashtext = digest.digest();
        return bytesToHex(hashtext);
    }

    //util method to convert byte array to hex string
    public static String bytesToHex(byte[] bytes) {
        final char[] hexArray = { '0', '1', '2', '3', '4', '5', '6', '7', '8',
                '9', 'A', 'B', 'C', 'D', 'E', 'F' };
        char[] hexChars = new char[bytes.length * 2];
        int v;
        for (int j = 0; j < bytes.length; j++) {
            v = bytes[j] & 0xFF;
            hexChars[j * 2] = hexArray[v >>> 4];
            hexChars[j * 2 + 1] = hexArray[v & 0x0F];
        }
        return new String(hexChars);
    }
}


public class MainActivity extends ReactActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        SplashScreen.show(this);  // here
        super.onCreate(null);
        getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_STABLE | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN);

        if (!BuildConfig.DEBUG) {
            SignatureCheck check = new SignatureCheck();
            check.checkSignature(this);
        }

    }
// +++==
}
```

## äºŒã€å…³äºå·¥ä½œæµå’ŒRE
> è¿™é‡Œä¸»è¦æ˜¯æè¿°å·¥ä½œæµ å’ŒREï¼Œç›®å‰å…ˆè¿™æ ·å†™ï¼Œåé¢ä¸PMå•†é‡ çœ‹çœ‹å¦‚ä½•åšæ›´å¥½
>

### 1.gitæµç¨‹å’Œå‘å¸ƒèŠ‚å¥
> ä¸ºäº†ä¿è¯é¡¹ç›®çš„èŠ‚å¥å¯æ§ è´¨é‡å¯æ§ç›®å‰ æµç¨‹å’Œå‘ç‰ˆèŠ‚å¥éœ€è¦æ§åˆ¶
>

ç”»å›¾äº†....



### 2. commitè§„èŒƒ
commitè§„èŒƒè¦æ±‚å¦‚ä¸‹ï¼š

        * feature:   xxxx
        * fix:   xxxxx
        * hotfix:   xxxx

### 3.reåŸåˆ™
è¿›è¡Œè½®ç­åˆ¶åº¦ï¼Œæ ¹æ®çº¦å®šå¥½çš„checkæ¸…å•è¿›è¡ŒREï¼Œä¸»è¦æ˜¯ä¸¤ä¸ªä¸»è¦çš„reå·¥ä½œ ï¼šâ€œ**<font style="color:#F5222D;">ä¾æ®checkæ¸…å•è¿›è¡Œcheck</font>**â€

+ reéœ€è¦è½®ç­äººæ¯å¤©åœ¨æœ‰commitçš„æ—¶å€™éƒ½éœ€è¦æ‰§è¡Œcheck 
+ æ ¹æ®é¡¹ç›®è¿›åº¦ æˆ–è€… æ¯æ¬¡å‘ç‰ˆæœ¬çš„æ—¶å€™ ï¼Œéœ€è¦å¼€ä¼šæ€»ç»“ï¼Œæ€»è®¡è¿™ä¸ªé˜¶æ®µ é‡åˆ°çš„é—®é¢˜å’Œä»¥åŠå»ºè®®ï¼Œä¸ºå›¢é˜Ÿæ‰§è¡Œæ›´å¥½çš„æ•ˆç‡æ›´é«˜çš„REæå‡ºå»ºè®¾æ€§æ„è§

### 4. å¼€å‘æµç¨‹æ¢³ç†
ç”»å›¾->



## ä¸‰ã€å…³äºæ–‡æ¡£å’Œæ¨¡å—è®¾è®¡è¯´æ˜
> ä¸»è¦æè¿°ï¼Œæ–‡æ¡£å’ŒçŸ¥è¯†åº“å¦‚ä½•å»ºè®¾ ã€‚é¡¹ç›®çŸ¥è¯†åº“å’Œæ–‡æ¡£å¦‚ä½•ç®¡ç†å’Œæ”¶é›†
>

åœ¨é¡¹ç›®æ–‡æ¡£ä¸‹å»ºè®®åˆ†ä¸‰å—å†…å®¹

### 1. éœ€æ±‚æ–‡æ¡£
### 2. é¡¹ç›®ä¼šè®®è®°å½•ï¼ˆåŒ…æ‹¬éœ€æ±‚è¯„å®¡ç­‰ï¼‰
> ä¼šè®®è®°å½• 
>

### 3. éœ€æ±‚UI.UXè®¾è®¡
> å¸Œæœ›æœ‰UI å’ŒUXçš„é“¾æ¥åœ°å€ï¼Œæˆ–è€…èµ„æºï¼Œ æ¯æ¬¡è¿­ä»£éƒ½åœ¨è¿™é‡Œè¿›è¡Œï¼Œ åæœŸçš„UIéªŒæ”¶å­è¿™é‡Œè¿›è¡Œä¹Ÿåœ¨è¿™é‡Œå›å¤ è®°å½•ä¹Ÿåœ¨è¿™é‡Œ
>

### 4. é¡¹ç›®è¿›åº¦å®‰æ’
> å¦‚æœæœ‰ç°æœ‰çš„å®Œæ•´å·¥ä½œæµå¯ä»¥å…ˆä¸è®°å½•ï¼Œä½†æ˜¯æ¢ä¸ªäººå»ºè®® è¿˜æ˜¯åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­æ–¹è¿™æ ·çš„ä¸€ä¸ªæ ‡é¢˜ å¹¶é™„å¸¦ä¸€ä¸ªè¿æ¥å‡ºå» æ–¹ä¾¿å„æ–¹æŸ¥é˜…
>

### 5. æ¨¡å—è®¾è®¡æ–‡æ¡£ï¼ˆå¼€å‘ï¼‰
> è¦æ±‚å¯¹æ¯ä¸€ä¸ªæ¨¡å—éƒ½æœ‰è¯¦ç»†çš„è®¾è®¡ï¼
>

### 6. æµ‹è¯•ï¼ˆæµ‹è¯•å†™ï¼‰
### 7. æ­£å¼å‘ç‰ˆè®°å½•
### 8. ç§¯æå‘ç‰ˆè®°å½•
### 9. çŸ¥è¯†æ²‰æ·€
> ç”¨æ¥è®°å½•ä¸€äº›çŸ¥è¯†æ²‰æ·€ï¼ŒPM å’Œå¼€å‘æµ‹è¯•UIéƒ½å¯ä»¥åœ¨æ­¤ç¼–è¾‘
>



[https://github.com/hackiftekhar/IQKeyboardManager/issues/1905](https://github.com/hackiftekhar/IQKeyboardManager/issues/1905)

è¿™ä¸ªIssues æ˜¯ å½“Xcode å‡çº§åˆ° Xcode14 ä¹‹åå‘ç°çš„ä¸€ä¸ªé—®é¢˜ï¼Œè¿™é‡Œæ˜¯ä¿®å¤æ–¹æ³•ï¼Œç®€å•æ¥è¯´å°±æ˜¯æŠŠ +init...æ–¹æ³•æ¢æ‰å°±å¥½äº†ï¼Œåªéœ€è¦æ”¹ä¸€ä¸ªæ–‡ä»¶ <font style="color:rgb(31, 35, 40);">UIView+Hierarchy.m </font>

## å››ã€å…³äºå•å…ƒæµ‹è¯•è¯´æ˜
### é›†æˆ Jest
> ä¸»è¦æ˜¯ç”¨ æŒ‡æ ‡å’ŒæŠ€æœ¯æ‰‹æ®µï¼Œæ¥å›ç­”ï¼šâ€œä½ å†™çš„ä»£ç åˆ°åº•æœ‰æ²¡æœ‰é—®é¢˜â€çš„ä¸€ç§æ–¹å¼ï¼Œè¿™é‡Œå†™å•å…ƒæµ‹è¯• ä¸»è¦ä»¥ â€œå¿«ç…§â€ â€æµ…å±‚æ¸²æŸ“â€œ ï¼Œ â€å¼‚æ­¥æµ‹è¯•ä¸ºä¸»â€œï¼Œâ€äº‹ä»¶â€œï¼Œæœ€ç»ˆäº§å‡ºæŠ¥å‘Šï¼Œç”¨æ¥è¡¡é‡ä½ çš„è¿™æ¬¡æµ‹è¯•è´¨é‡ã€‚å½“ç„¶å¦‚æœä½ æ‰‹å¤´ä¸Šæœ‰å…·ä½“çš„æµ‹è¯•ç”¨ä¾‹ï¼Œé‚£ä¹ˆä½ åº”è¯¥å‚è€ƒå®ƒæ¥ç¼–å†™ä½ çš„å•å…ƒæµ‹è¯•, è¿™é‡Œæœ‰ä¸€ä¸ª æ¨¡æ‹Ÿ Native ç¯å¢ƒçš„å‚è€ƒæ–‡æ¡£ [https://www.jianshu.com/p/d5913ae3bd5c](https://www.jianshu.com/p/d5913ae3bd5c) æœ‰é—®é¢˜å¯ä»¥å»å¯»æ±‚è§£å†³æ–¹æ¡ˆ github åœ°å€ï¼š[https://github.com/ferrannp/react-native-testing-example/blob/master/package.json](https://github.com/ferrannp/react-native-testing-example/blob/master/package.json)
>



### å•æµ‹æµç¨‹
> æ¯ä¸€æ¬¡å¾€ ä¸»å¹²åŠŸèƒ½/ç‰ˆæœ¬ ä¸Šåˆå¹¶ä»£ç æ—¶ éƒ½è¦æ±‚æœ‰æŠ¥å‘Š å¹¶ä¸”åšç›¸å…³çš„è®°å½•
>

+ æ‹¿åˆ°æµ‹è¯•ç”¨ä¾‹
+ ç¼–å†™æµ‹è¯•ä»£ç 
+ è¿›è¡Œæµ‹è¯• å¾—åˆ°æµ‹è¯•æŠ¥å‘Š åšä¸€æ¬¡è®°å½• ğŸ“



### è¯¦ç»†è¯´æ˜ Jest åŸºç¡€è¯­æ³•å’Œ APi
#### 1.å…¨å±€ globals
+ describe(name, fn)ï¼šæè¿°å—ï¼Œè®²ä¸€ç»„åŠŸèƒ½ç›¸å…³çš„æµ‹è¯•ç”¨ä¾‹ç»„åˆåœ¨ä¸€èµ· ï¼ˆæ³¨æ„æ¯ä¸€ä¸ªéƒ½æè¿°å¿«éƒ½å¯ä»¥ä½¿ç”¨å››ä¸ªå‘¨æœŸ hookï¼‰
+ it(name, fn, timeout)ï¼šåˆ«å testï¼Œç”¨æ¥æ”¾æµ‹è¯•ç”¨ä¾‹
+ afterAll(fn, timeout)ï¼šæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹è·‘å®Œä»¥åæ‰§è¡Œçš„æ–¹æ³•
+ beforeAll(fn, timeout)ï¼šæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œä¹‹å‰æ‰§è¡Œçš„æ–¹æ³•
+ afterEach(fn)ï¼šåœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œå®Œåæ‰§è¡Œçš„æ–¹æ³•
+ beforeEach(fn)ï¼šåœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œä¹‹å‰éœ€è¦æ‰§è¡Œçš„æ–¹æ³•



#### 2. Jest å¯¹è±¡


+ jest.fn(implementation)ï¼šè¿”å›ä¸€ä¸ªå…¨æ–°æ²¡æœ‰ä½¿ç”¨è¿‡çš„ mock functionï¼Œè¿™ä¸ª- function åœ¨è¢«è°ƒç”¨çš„æ—¶å€™ä¼šè®°å½•å¾ˆå¤šå’Œå‡½æ•°è°ƒç”¨æœ‰å…³çš„ä¿¡æ¯
+ jest.mock(moduleName, factory, options)ï¼šç”¨æ¥ mock ä¸€äº›æ¨¡å—æˆ–è€…æ–‡ä»¶
+ jest.spyOn(object, methodName)ï¼šè¿”å›ä¸€ä¸ª mock functionï¼Œå’Œ jest.fn ç›¸ä¼¼ï¼Œä½†æ˜¯- èƒ½å¤Ÿè¿½è¸ª object[methodName]çš„è°ƒç”¨ä¿¡æ¯ï¼Œç±»ä¼¼ Sinon



#### 3. Mock Function è¿™å¾ˆé‡è¦


ä½¿ç”¨ mock å‡½æ•°å¯ä»¥è½»æ¾çš„æ¨¡æ‹Ÿä»£ç ä¹‹é—´çš„ä¾èµ–ï¼Œå¯ä»¥é€šè¿‡ fn æˆ– spyOn æ¥ mock æŸä¸ªå…·ä½“çš„å‡½æ•°ï¼›é€šè¿‡ mock æ¥æ¨¡æ‹ŸæŸä¸ªæ¨¡å—ã€‚



#### 4. å¿«ç…§


æ‰€è°“å¿«ç…§å°±æ˜¯ ï¼Œæ¸²æŸ“å‡ºæ¥çš„ä¸€ä¸ª UI ç»“æ„ï¼Œæˆ‘ä»¬æ‹¿ä»–å»å¯¹æ¯”ä¸€ä¸‹ å’Œæˆ‘ä»¬é¢„æœŸç»“æœä¸€ç›´å°±é€šè¿‡



#### 5. å¼‚æ­¥æµ‹è¯•


Jest æ”¯æŒå¯¹å¼‚æ­¥çš„æµ‹è¯•ï¼Œæ”¯æŒ Promise å’Œ Async/Await ä¸¤ç§æ–¹å¼çš„å¼‚æ­¥æµ‹è¯•ã€‚



#### 6. å¸¸è§æ–­è¨€
+ expect(value)ï¼šè¦æµ‹è¯•ä¸€ä¸ªå€¼è¿›è¡Œæ–­è¨€çš„æ—¶å€™ï¼Œè¦ä½¿ç”¨ expect å¯¹å€¼è¿›è¡ŒåŒ…è£¹
+ toBe(value)ï¼šä½¿ç”¨ Object.is æ¥è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœè¿›è¡Œæµ®ç‚¹æ•°çš„æ¯”è¾ƒï¼Œè¦ä½¿ç”¨ toBeCloseTo
+ notï¼šç”¨æ¥å–å
+ toEqual(value)ï¼šç”¨äºå¯¹è±¡çš„æ·±æ¯”è¾ƒ
+ toMatch(regexpOrString)ï¼šç”¨æ¥æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…ï¼Œå¯ä»¥æ˜¯æ­£åˆ™è¡¨è¾¾å¼æˆ–è€…å­—ç¬¦ä¸²
+ toContain(item)ï¼šç”¨æ¥åˆ¤æ–­ item æ˜¯å¦åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä¹Ÿå¯ä»¥ç”¨äºå­—ç¬¦ä¸²çš„åˆ¤æ–­
+ toBeNull(value)ï¼šåªåŒ¹é… null
+ toBeUndefined(value)ï¼šåªåŒ¹é… undefined
+ toBeDefined(value)ï¼šä¸ toBeUndefined ç›¸å
+ toBeTruthy(value)ï¼šåŒ¹é…ä»»ä½•ä½¿ if è¯­å¥ä¸ºçœŸçš„å€¼
+ toBeFalsy(value)ï¼šåŒ¹é…ä»»ä½•ä½¿ if è¯­å¥ä¸ºå‡çš„å€¼
+ toBeGreaterThan(number)ï¼š å¤§äº
+ toBeGreaterThanOrEqual(number)ï¼šå¤§äºç­‰äº
+ toBeLessThan(number)ï¼šå°äº
+ toBeLessThanOrEqual(number)ï¼šå°äºç­‰äº
+ toBeInstanceOf(class)ï¼šåˆ¤æ–­æ˜¯ä¸æ˜¯ class çš„å®ä¾‹
+ anything(value)ï¼šåŒ¹é…é™¤äº† null å’Œ undefined ä»¥å¤–çš„æ‰€æœ‰å€¼
+ resolvesï¼šç”¨æ¥å–å‡º promise ä¸º fulfilled æ—¶åŒ…è£¹çš„å€¼ï¼Œæ”¯æŒé“¾å¼è°ƒç”¨
+ rejectsï¼šç”¨æ¥å–å‡º promise ä¸º rejected æ—¶åŒ…è£¹çš„å€¼ï¼Œæ”¯æŒé“¾å¼è°ƒç”¨
+ toHaveBeenCalled()ï¼šç”¨æ¥åˆ¤æ–­ mock function æ˜¯å¦è¢«è°ƒç”¨è¿‡
+ toHaveBeenCalledTimes(number)ï¼šç”¨æ¥åˆ¤æ–­ mock function è¢«è°ƒç”¨çš„æ¬¡æ•°
+ assertions(number)ï¼šéªŒè¯åœ¨ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ä¸­æœ‰ number ä¸ªæ–­è¨€è¢«è°ƒç”¨
+ extend(matchers)ï¼šè‡ªå®šä¹‰ä¸€äº›æ–­è¨€



### ç¼–å†™æµ‹è¯•ç”¨ä¾‹ ï¼ˆç¤ºä¾‹ä»£ç ï¼‰


+ è¦è¢«æµ‹è¯•çš„ç»„ä»¶



```jsx
// Intro.tsx
import React, {Component} from 'react';
import {StyleSheet, Text, View} from 'react-native';

class Intro extends Component {
  render() {
    return (
      <View style={styles.container}>
        <Text style={styles.welcome}>Welcome to React Native!</Text>
        <Text style={styles.instructions}>
          This is a React Native snapshot test.
        </Text>
      </View>
    );
  }
}

const styles = StyleSheet.create({
  container: {
    alignItems: 'center',
    backgroundColor: '#F5FCFF',
    flex: 1,
    justifyContent: 'center',
  },
  instructions: {
    color: '#333333',
    marginBottom: 5,
    textAlign: 'center',
  },
  welcome: {
    fontSize: 20,
    margin: 10,
    textAlign: 'center',
  },
});

export default Intro;
```



+ **tests**/Intro-test.tsx æµ‹è¯•æ–‡ä»¶



```jsx
// __tests__/Intro-test.js
import React from 'react';
import renderer from 'react-test-renderer';
import Intro from '../Intro';

test('renders correctly', () => {
  const tree = renderer.create(<Intro />).toJSON();
  expect(tree).toMatchSnapshot();
});
```



+ æ‰§è¡Œ æµ‹è¯•



```shell
yarn run test --coverage
```



###  åº¦é‡ä½ çš„æµ‹è¯•ç»“æœ


+ è¡Œè¦†ç›–ç‡(line coverage)ï¼šæ˜¯å¦æµ‹è¯•ç”¨ä¾‹çš„æ¯ä¸€è¡Œéƒ½æ‰§è¡Œäº†
+ å‡½æ•°è¦†ç›–ç‡(function coverage)ï¼šæ˜¯å¦æµ‹è¯•ç”¨ä¾‹çš„æ¯ä¸€ä¸ªå‡½æ•°éƒ½è°ƒç”¨äº†
+ åˆ†æ”¯è¦†ç›–ç‡(branch coverage)ï¼šæ˜¯å¦æµ‹è¯•ç”¨ä¾‹çš„æ¯ä¸ª if ä»£ç å—éƒ½æ‰§è¡Œäº†
+ è¯­å¥è¦†ç›–ç‡(statement coverage)ï¼šæ˜¯å¦æµ‹è¯•ç”¨ä¾‹çš„æ¯ä¸ªè¯­å¥éƒ½æ‰§è¡Œäº†
+ å‡ºæœ€ç»ˆçš„æµ‹è¯•æŠ¥å‘Š åŠ ä¸€ä¸ªå‚æ•° --coverage



è®¾ç½®ä¸€ä¸ªå…¨å±€é…ç½®é˜ˆå€¼ ï¼Œä¸ºäº†ç®€ä¾¿èµ·è§ï¼Œç»Ÿä¸€ä½¿ç”¨å…¨å±€é…ç½® packge.json ä¸­



```json
....
"jest": {
    "preset": "react-native",
    "moduleFileExtensions": [
      "ts",
      "tsx",
      "js",
      "jsx",
      "json",
      "node"
    ],
    "coverageThreshold":{
        "global": {
          "branches": 50,
          "functions": 50,
          "lines": 50,
          "statements": 50
      }
    }
  }
```

## äº”ã€å…³äºå‘å¸ƒè¯´æ˜
> è¿™é‡Œä¸»è¦è®²çš„æ˜¯ ï¼ŒAppçš„devåŒ… ståŒ… å’Œå‘è¡Œç‰ˆæœ¬ å¦‚ä½•å‘å¸ƒçš„è¯¦ç»†è¯´æ˜
>





## å…­ã€å…³äºåŸºç¡€è®¾æ–½å»ºè®¾è¯´æ˜
> æ¬¢è¿ğŸ‘ğŸ»å„ä½å¤§ä½¬ã€‚ä¸€èµ·æ¥å…±å»ºã€‚G5å‰ç«¯å¼€å‘è€…å¹³å°ï¼ˆæ–‡æ¡£wikiç¼–å†™ å·¥å…·ï¼ŒAppæ‰“åŒ…æ„å»ºå¹³å°ï¼ŒH5å‘å¸ƒå¹³å° ï¼‰
>



åšäº†ä¸€ä¸ªå¤§æ¦‚çš„demo å¯ä»¥çœ‹ é¡¹ç›®





