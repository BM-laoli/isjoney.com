---
title: "å–„çœ - ç¬¬äºŒåæœŸ (23å¹´8æœˆ)"
date: "2024-12-19"
summary: "åˆ†äº«é¡¹ç›®åˆ†æç»éªŒï¼ŒåŒ…æ‹¬Chaté¡¹ç›®çš„åˆ†ææµç¨‹ã€æŠ€æœ¯å®æ–½ç»†èŠ‚ï¼Œä»¥åŠå…³äºä¸“æ³¨åŠ›å’Œç½‘ç»œèµ„æºç”„åˆ«çš„æ€è€ƒã€‚"
status: "completed"
tech: ["é¡¹ç›®åˆ†æ","Chaté¡¹ç›®","æŠ€æœ¯å®æ–½","ä¸“æ³¨åŠ›","èµ„æºç”„åˆ«"]
github: "https://github.com/BM-laoli"
arxiv: ""
keyId: "å–„çœ"
---

# é¡¹ç›®åˆ†æçš„ç»éªŒ
> æœ€è¿‘æˆ‘åœ¨åˆ†æä¸€ä¸ª Chaté¡¹ç›®çš„æ—¶å€™  å¼€é˜”äº†ä¸€ç§æ–°çš„é¡¹ç›®åˆ†ææµç¨‹ï¼Œè¿™è®©æˆ‘å¯¹é¡¹ç›®çš„æ•´ä½“çš„æŠŠæ¡åˆæ›´å¼ºå¤§äº†ä¸€äº›
>



ä¸‹å›¾çš„åˆ†æè¿‡ç¨‹

```markdown
**å®ŒæˆğŸ‰  ğŸ±è¿›è¡Œä¸­ âœ¨æ˜å¤©çœ‹çœ‹èƒ½ä¸èƒ½æå®š  holdğŸ¨**

# 2023-08-23

 [ğŸ±] Chatçš„å‰©ä¸‹æ”¹åŠ¨
      [ğŸ±] Issuse
          [ğŸ±] Ifream
              [ğŸ‰] åˆ†æ
              <https://imk.neweggimages.com/amber/json/691/3674.18.js> loadJs
              <https://imk.neweggimages.com/amber/json/156/3564.16.js> inject-header-proactive çš„ inject ä¸ seller message æ²¡å…³ç³»
              [ğŸ‰] è®¾è®¡
                   è®©component ä¸€ç›´load ä¸€ä¸ªé®ç½© ï¼Œç›´åˆ° iframe å‘å‡ºpostMessage æ¶ˆæ¯â€œæˆ‘loadå®Œäº†ï¼â€ ï¼Œå…³é—­è‡ªå·±çš„load å±•ç¤º iframe çš„dom å°±å¥½äº†

                   1.æ”¹è„šæœ¬ æ³¨å†ŒpostMessage äº‹ä»¶ï¼Œæ³¨æ„JS çš„åŠ è½½é¡ºåºé—®é¢˜
                   2.ç»™React ç»™ä»–æŒ‚ä¸Šç›‘å¬
                   3.iframe postå‡ºä¸€ä¸ªä¿¡æ¯ ç»™React
                   4.éªŒè¯ .... éªŒè¯æˆåŠŸ
              [ğŸ±] å®æ–½
                  ç­‰å¾…è¿ç§»åˆ° æ–°branch ,
                  SSL æ— package æ”¹åŠ¨ ä»… mact-notification é•œåƒå˜åŠ¨

          [ğŸ±] IP æºå¸¦
              [ğŸ‰] åˆ†æ
                  initialCustomerMsgInfoToAgent
                  initialCustomerInfoToAgent
                  è¿™ä¸¤ä¸ªfunctioné‡Œä¼šä¼ ip åˆ°precould
              [ğŸ‰] è®¾è®¡
                  Chat(initialCustomerInfoToAgent)å·²ç»åŠ äº† , CSMessage åªéœ€è¦åœ¨è°ƒç”¨çš„æ—¶å€™ + IP å°±å¥½äº†  => initialCustomerMsgInfoToAgent(initialState?.AdditionInfo?.ip),
                  éªŒè¯ .... éªŒè¯æˆåŠŸ
              [ğŸ±] å®æ–½
                  ç­‰å¾…è¿ç§»åˆ° æ–°branch ,


          [ğŸ±] å¹´æœˆæ—¥
              [ğŸ‰] åˆ†æ
              éœ€æ±‚: åªéœ€è¦æ”¹æˆ 18:03 08/17/2023 æ ¼å¼å°±å¥½äº†,èŒƒå›´åªæœ‰ CSMessage ç”Ÿæ•ˆ
              
              å­˜é‡ä»£ç åˆ†æ:
               ç±»å‹ä¸ä¸€æ · class=time-stamp çš„ DOMå±•ç¤ºä¹Ÿä¸ä¸€æ · 
                1.MsgType.Agent,  MsgType.ChatBot,  : AgentAdditionalInfo å– time
                2.MsgType.User need retry ä¸ä¼šç”¨åˆ° ä¸ç”¨ç®¡
                3.MsgType.User æ­£å¸¸çš„æƒ…å†µä¼šå‘: AgentAdditionalInfo å– time
                æ€»ç»“ å»æº¯æº AgentAdditionalInfoå°±å¯ä»¥äº†

                è¿™é‡Œä¼šæœ‰ä¸€ä¸ªè½¬åŒ–å·¥å…· convertDate, åœ¨æ–‡ä»¶ useChatAgentUtils ä¸­è¢«é¢‘ç¹ä½¿ç”¨
                è¿™é‡Œä¼šæœ‰ä¸€ä¸ªè½¬åŒ–å·¥å…· convertDate, åœ¨æ–‡ä»¶ useMsgAgentUtils.ts ä¸­è¢«é¢‘ç¹ä½¿ç”¨
                åœ¨ ChatAgent ä¸­ä¹Ÿè¢« é¢‘ç¹ä½¿ç”¨
                åœ¨ ChatBot ä¸­ä¹Ÿæ˜¯è¢« é¢‘ç¹ä½¿ç”¨
                åœ¨ useMsgAgent.tsx ä¸­ä¹Ÿç»å¸¸è¢«ä½¿ç”¨
                åœ¨ useMsgBot ä¸­ä¹Ÿç»å¸¸è¢«ä½¿ç”¨

              [ğŸ‰] è®¾è®¡
                  ä»è½¬åŒ–æ¥çœ‹ è¿™äº›time è²Œä¼¼éƒ½æ˜¯ä»dateå­—æ®µè½¬åŒ–æ¥çš„, è€Œ AgentAdditionalInfo ä¸­æœ‰ä¸€ä¸ªå‚æ•°å«åš date ,å­˜åœ¨äº BaseMsgInfo ä¸­,
                  ä¸º ele è®¾å®šä¸€ä¸ª isCSMessage?:boolean å‚æ•° ç”¨äºé€‚é… CSMessage åœºæ™¯

                  ä¸è¡Œ! ä»¥ä¸Šçš„æ–¹æ¡ˆè¢«å¦å®šäº† dateæ˜¯Serviceåœ¨msgList ä¸­ ,æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™æ˜¯ å¤–å±‚çš„ BaseAdditionalInfo, æˆ‘ä»¬è¯•ä¸€ä¸‹ç»™æ¶‰åŠåˆ°çš„åœ°æ–¹ æŠŠè¿™ä¸ªå‚æ•°å…¨loadä¸Š
                ```js
                export const convertDateV2 = (date?: Date): string => {
                      const targetDate = date ? new Date(date) : new Date();
                      
                      const formattedTime = targetDate.toLocaleTimeString('en-US', {
                          hour: 'numeric',
                          minute: 'numeric',
                          hour12: false
                      });

                      const formattedDate = targetDate.toLocaleDateString('en-US', {
                          month: '2-digit',
                          day: '2-digit',
                          year: 'numeric'
                      });

                      return `${formattedTime} ${formattedDate}`;
                  };
                ```
                éªŒè¯ .... éªŒè¯æˆåŠŸ
              [ğŸ±] å®æ–½
                  ç­‰å¾…è¿ç§»åˆ° æ–°branch ,
          
      [ğŸ±] UI Change
              [ğŸ‰] åˆ†æ
                  å·²ç»å†…ç½®äº†, æˆ‘ä»¬åªéœ€è¦åœ¨è¿™é‡Œæ¸²æŸ“å®ƒå°±å¥½äº†, addMsgReasonTable æœç´¢è¿™ä¸ªfunction ä»è¿™é‡Œentryå»æŸ¥é‡Œé¢çš„æ–‡ä»¶ä¿®æ”¹å°±å¥½äº†, æ¸²æŸ“çš„åœ°æ–¹åœ¨ render-msgé‡Œçš„ ReasonTable component 
              [ğŸ‰] è®¾è®¡
                  è‡ªå·±å» è°ƒæ•´æ ·å¼å»
                  éªŒè¯ .... éªŒè¯æˆåŠŸ
              [ğŸ±] å®æ–½
                  ç­‰å¾…è¿ç§»åˆ° æ–°branch ,

# å¤‡ä»½

SSL UI CustomerServiceContent

```js

return state.Messages == null || state.Messages == undefined ? (
    <LoadingWithoutOverlay isShown={true} />
  ) : (
    <div className="col-wide grid-wrap grid-wrap-xl">
      <div className="col-wide">
        <div
          className="seller-msg-wrap item-cells-wrap bg-lightgray radius-m"
          data-tab-type="tab-wrap"
        >
          {/* <!-- msg-container--> */}
          <div className="seller-msg-container col-wide auto-flex">
            <div className="seller-msg-inner bg-white is-active" data-tab-type="tab-content">
              <div className="seller-msg-inner-header">
                <div className="user-list-cell">
                  <div className="user-avatar bg-white">
                    <img src={state.Logo} alt="avatar" />
                  </div>
                  <div className="user-list-info auto-flex">
                    <div className="user-name">
                      <span>{state.Name}</span>
                    </div>
                    {state.Title && (
                      <div style={{ marginTop: '5px' }}>
                        <span>{state.Title}</span>
                      </div>
                    )}
                  </div>
                </div>
              </div>
              <div className="seller-msg-inner-content" style={{ maxHeight: '400px' }}>
                <PerfectScrollbar
                  options={{ wheelPropagation: false }}
                  className="seller-msg-inner-space"
                  containerRef={(dialogRef) => setDialoagScrollRef(dialogRef)}
                  onYReachStart={_.debounce(handleSearch, 500)}
                  style={{ maxHeight: '370px' }}
                >
                  {state.Messages?.map((message, index) => {
                    return (
                      <React.Fragment key={`${message.Message}_${index}`}>
                        <TransactionCell
                          msg={message}
                          transactionIndex={index}
                          userDefaultLogo={userDefaultLogo}
                        />
                      </React.Fragment>
                    );
                  })}
                </PerfectScrollbar>
              </div>
              {/* <div className="message message-note no-bg">
                <div className="message-wrapper">
                  <div className="message-icon"></div>
                  <div className="message-information">
                    Note: For your protection, do not share email address, credit card numbers, or
                    other personal information in your message.
                  </div>
                </div>
              </div> */}
              <div
                className={classNames('seller-msg-area', 'radius-s', {
                  'is-active': !state.ReplySubmintting && textActive,
                  'show-error': validating && isTextError(typedText),
                })}
                ref={textAreaRef}
                onClick={() => setTextActive(true)}
              >
                <div className="message message-note no-bg no-margin seller-msg-inner-note">
                  <div className="message-wrapper">
                    <div className="message-icon"></div>
                    <div className="message-information">
                      <p>
                        Note: For your protection, do not share email address, credit card numbers,
                        or other personal information in your message.
                      </p>
                    </div>
                  </div>
                </div>
                <div className="input-textarea">
                  <textarea
                    id="Reply_Msg4"
                    ref={textRef}
                    placeholder="Enter Messageâ€¦"
                    className="scrollbar txtstuff"
                    aria-label="Enter Message"
                    style={{ height: '63px' }}
                    onChange={(e) => {
                      if (e.target.value.length > MaxTextCount) {
                        e.target.value = e.target.value.substring(0, MaxTextCount);
                      }
                      setTypedText(e.target.value);
                    }}
                  ></textarea>
                </div>

                {messageCenterState.UploadImageConfig?.CanUpload && attachmentEnabled && (
                  <AttachmentUploadContainer
                    title={'Attachments'}
                    isMediaTitleShow={false}
                    containerStyle={'attachments is-list'}
                    required={false}
                    uploads={[]}
                    uploadConfig={messageCenterState.UploadImageConfig as any}
                    isNotAllowReview={false}
                    bizType={4}
                    newFileType={true}
                    setUploading={(status) => {
                      setAttachmentUploading(status);
                    }}
                    addImageInfo={(data, initIndex, fileName, clientName) => {
                      if (data) {
                        setImageList((preImageList) => {
                          preImageList.push({ data, initIndex, fileName, clientName });
                          return preImageList;
                        });
                      }
                    }}
                    removeImageInfo={(initIndex) => {
                      setImageList((preImageList) => {
                        const now = preImageList.filter((item) => initIndex !== item.initIndex);
                        return now;
                      });
                    }}
                  />
                )}
                <div className="seller-msg-area-footer display-flex">
                  <div className="seller-msg-area-l">
                    <div
                      className="upload-btn"
                      onClick={() => {
                        if (_.isEmpty(imageList) && !attachmentUploading) {
                          setAttachmentEnabled(!attachmentEnabled);
                        }
                      }}
                    >
                      <label>
                        <i className="ico ico-paperclip-regular"></i>
                        <span>Attachments</span>
                      </label>
                    </div>
                    <span>(Optional)</span>
                    {renderPopover()}
                  </div>
                  <div className="seller-msg-area-r">
                    {renderTextCounter()}
                    <button
                      type="button"
                      className="button button-m bg-blue"
                      onClick={() => {
                        handleReplyMessage();
                      }}
                      disabled={attachmentUploading || state.ReplySubmintting}
                    >
                      {state.ReplySubmintting ? 'SENDING' : 'SEND'}
                    </button>
                  </div>
                </div>

                {state.ReplyResult == false && renderReplyError()}

                {validating && _.isEmpty(typedText?.trim()) && (
                  <div className="form-error-msg radius-s font-s at-right">
                    This field is required.
                  </div>
                )}
              </div>
            </div>
          </div>
          {/* <!-- //seller-msg-container--> */}
        </div>
      </div>
    </div>
  );

```

NgChat Reason UI

```tsx
   return (
        <div className="table-container">
            {tableName && <label className="form-cell-name">{tableName}</label>}
            <table className="table">
                <tbody>
                    {currentPageData.map((item, index) => (
                        <tr key={index}>
                            <td
                                onClick={() => {
                                    onChange && onChange(item);
                                }}
                            >
                                {item}
                            </td>
                        </tr>
                    ))}
                    <tr key={'pagination'}>
                        <td>
                            <div className="pagination">
                                {Array.from({ length: totalPages }, (_, index) => index + 1).map(
                                    (page) => (
                                        <button
                                            key={page}
                                            className={page === currentPage ? 'active' : ''}
                                            onClick={() => handlePageClick(page)}
                                        >
                                            {page}
                                        </button>
                                    )
                                )}
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    );
```
```

ä¸»è¦çš„è§‚ç‚¹æ˜¯ï¼š ç»†å¿ƒä¸”æœ‰è€å¿ƒ, ä¸€æ­¥ä¸€æ­¥çš„å»åˆ†æ æ•´ä¸ªé“¾è·¯é€»è¾‘å°±å¯ä»¥äº†



å†ä¸¾ä¸€ä¸ªä¾‹å­  ï¼ˆè¿™é‡Œæ˜¯å¯¹ å­˜é‡é€»è¾‘çš„åˆ†æ ç”±å¤–éƒ¨åˆ°å†…éƒ¨ï¼Œå†æœ‰å†…éƒ¨åˆ°å¤–éƒ¨ï¼‰

```javascript
// NCTools è·å–SEODetail------> è¿™æ˜¯ä¸€ä¸ªå®æ—¶ è·å–çš„å®æ—¶ç”Ÿæˆçš„
// -> API = list/{navigationId}/{navigationType}
  // -> GetSEODetail
    // -> GetSEODetail ä» è¡¨ SEOAutomationNavigationTreeChatGPT è·å–æ•°æ® SEODetail
      // -> æ‰§è¡Œçš„DB method = GetSEODetailï¼Œ è¡¨=SEOAutomationNavigationTreeChatGPT  ContentType = 4 çš„ ContentDetail åšä¸º  detail.SEOContentList  (å®¹æ˜“è¯¯å¯¼ è¿™é‡Œçš„type ä¾ç„¶æ˜¯ interface SEODetailInfo)
    // ->  handleSEODetailSEOContent( SEODetail.SEOContentList ,USA ) è½¬åŒ– 
      // -> ä»SEOContentList çš„ TransactionNumber (USA) ä¸­è·å– å†…é“¾ seoInternalLinkList  GetSEOInternalLinkList è½¬åŒ–
          // æŸ¥è¡¨ SEOAutomation_InternalLink æ‰§è¡Œå«åš GetSEOInternalLinkList ï¼Œè¿”å›çš„æ˜¯ interface SEOInternalLink {} é‡Œé¢å°±æœ‰ URL
      // -> åŒ¹é… s.NavigationTreeChatGPT_TranNumber = SEOcontent.TransactionNumber  åšmatchedSEOInternalLinkList ,SEOContentDetail = table.ContentDetail
        // -> handleInternalLink æ›¿æ¢(æ³¨æ„æ–°æ—§ä¹‹åˆ† ä¸»è¦å°±æ˜¯ContentDetailæœ‰æ²¡æœ‰ seoContent ) 
          // old handleInternalLink( matchedSEOInternalLinkList, jsonDetail.paragraph[i] )
          // now handleInternalLink( matchedSEOInternalLinkList, jsonDetail.paragraph[i] )
            //  SEOContentDetailHTMLForUI = ä»¥ä¸ŠhandleInternalLinkå¤„ç†è¿‡çš„ å†…å®¹


// Neweggç”¨ ç”Ÿæˆå†…é“¾ ------>
// handleSEODetailSEOContent ä»å†…å‘å¤–
  // <- BuildPageSEOAsync
    // <- appendPageSEODto_Country
      // <- appendPageSEODto_Item
          // <- _SEORepository.UpdateSEOStatus
            // <- _SEOBusiness.UpdateSEOStatus
              // <- API = list

// å¯¹ handleInternalLink çš„è§£æ ------>
  // -> è¿™é‡Œåªæœ‰ç”Ÿæˆ Keyword å’Œ aæ ‡ç­¾çš„åœ°æ–¹ URL Name Keyword éƒ½æ˜¯ä»DBé‡Œé¢æ¥çš„. æœ¬æ¬¡ ec-bkdchatgptseoService åªå¤„ç† è¿™ä¸ªkeywordçš„æ›¿æ¢
```



# èƒ½ä¸èƒ½ä¸åç¦»è®¡åˆ’(å…³äºä¸“æ³¨çš„é—®é¢˜)
> ä¹‹å‰
>



# ç½‘ç»œçš„ä¸œè¥¿è¯¾ç¨‹éœ€è¦è¾¨åˆ«(åƒåœ¾ä¿¡æ¯è¶Šæ¥è¶Šå¤š)
> ç½‘ç»œä¸Šçš„èµ„æºä»€ä¹ˆçš„ è¿™äº›ä¸œè¥¿ éœ€è¦è¾¨åˆ«ï¼
>

è¿™ä»¶äº‹æƒ…è¿˜å¾—ä»æˆ‘ä¸Š7æœˆä½ ï¼Œçªç„¶æœ‰ä¸€ä¸ª â€œåšæ²™é›•çŸ­è§†é¢‘â€çš„æƒ³æ³•è¯´èµ·,  æˆ‘è¯„ä¼°äº†æˆ‘çš„è¿™ä¸ªé¡¹ç›® å—¯å¾ˆç®€å•ï¼æˆ‘èƒ½åšï¼Œäºæ˜¯å°±ä»ç½‘ç»œä¸Š ä»å’¸é±¼ä¹°äº†ä¸€äº›èµ„æº æ–­æ–­ç»­ç»­æŠ•èµ„äº†



å’¸é±¼ï¼šï¿¥1.47

èµ„æºï¼šï¿¥0.3 ç´ æ

æ’ä»¶ï¼šï¿¥7.5 RTX AE Plugin 

é¢å¤–:  æ˜¾å¡ç‚¼ä¸¹ç‚‰æ”¹é€ ï¿¥700 

æ€»æŠ•èµ„: ï¿¥708.97

æ—¶é—´æˆæœ¬: 4D 32H

æ”¶ç›Š: ï¿¥0ï¼Œå‡†å¤‡è¸å…¥ ç‚¼ä¸¹çš„é¢†åŸŸ Python AI etc.....



æˆ‘å‘ç°ä»å’¸é±¼ä¹°çš„è¯¾ç¨‹ éå¸¸çš„åƒåœ¾ï¼Œä¸€ç‚¹éƒ½ä¸æˆä½“ç³»ï¼Œçœ‹å®Œäº† ç¬”è®°ä¹Ÿåšäº†ï¼Œä½†æ˜¯å¾ˆå¤šä¸œè¥¿å‹æ ¹è®²ä¸åˆ°ç‚¹å­ä¸Šï¼å¾ˆåƒåœ¾ çœŸçš„ï¼Œå¥½å‡ ä¸ªè¯¾ç¨‹æ‹¼æ¥çš„ è¿˜é‡å¤ï¼ŒçœŸçš„ï¼ä»¥åçš„ä¸œè¥¿è¿˜æ˜¯éœ€è¦å¥½å¥½çš„**<font style="color:#DF2A3F;">ç”„åˆ«ï¼å¦‚æœä¸ç„¶ æ²‰é»˜æˆæœ¬å·¨å¤§</font>**

